{"ast":null,"code":"import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport { isValidToken } from '@/services/auth.service';\nVue.use(VueRouter);\nconst Layout = () => import( /* webpackChunkName: \"layout\" */'@/layout/SApp');\nconst routeOptions = [{\n  path: 'arquivo',\n  name: 'arquivo/ArquivoList'\n}, {\n  path: 'arquivo/cadastrar',\n  name: 'arquivo/ArquivoCreate'\n}];\nconst routes = routeOptions.map(route => {\n  return {\n    ...route,\n    component: () => import( /* webpackChunkName: \"[request]\" */`@/views/${route.name}`)\n  };\n});\nconst router = new VueRouter({\n  mode: 'history',\n  routes: [{\n    path: '/login',\n    name: 'Login',\n    component: () => import( /* webpackChunkName: \"login\" */'@/views/Login')\n  }, {\n    path: '/',\n    component: Layout,\n    children: routes\n  }]\n});\nrouter.beforeEach((to, from, next) => {\n  const token = localStorage.getItem('condomob@accessToken');\n  const user = JSON.parse(localStorage.getItem('condomob@user'));\n  const {\n    authorize\n  } = to.meta;\n  if (to.name !== 'Login' && !isValidToken(token)) {\n    next({\n      name: 'Login'\n    });\n  } else if (user && !user.is_superuser && authorize && !user.roles.includes(authorize)) {\n    Vue.$toast.open({\n      message: \"Você não tem permissão para executar esta ação\",\n      type: \"error\"\n    });\n  } else next();\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","isValidToken","use","Layout","routeOptions","path","name","routes","map","route","component","router","mode","children","beforeEach","to","from","next","token","localStorage","getItem","user","JSON","parse","authorize","meta","is_superuser","roles","includes","$toast","open","message","type"],"sources":["/home/arthur/condomob/condomob-frontend/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport { isValidToken } from '@/services/auth.service'\n\nVue.use(VueRouter)\n\nconst Layout = () => import(/* webpackChunkName: \"layout\" */ '@/layout/SApp')\n\nconst routeOptions = [\n  { path: 'arquivo', name: 'arquivo/ArquivoList' },\n  { path: 'arquivo/cadastrar', name: 'arquivo/ArquivoCreate' },\n]\n\nconst routes = routeOptions.map(route => {\n  return {\n    ...route,\n    component: () => import(/* webpackChunkName: \"[request]\" */ `@/views/${route.name}`)\n  }\n})\n\nconst router = new VueRouter({\n  mode: 'history',\n  routes: [\n    {\n      path: '/login',\n      name: 'Login',\n      component: () =>\n        import(/* webpackChunkName: \"login\" */ '@/views/Login')\n    },\n    {\n      path: '/',\n      component: Layout,\n      children: routes\n    },\n  ]\n})\n\nrouter.beforeEach((to, from, next) => {\n  const token = localStorage.getItem('condomob@accessToken')\n  const user = JSON.parse(localStorage.getItem('condomob@user'))\n  const { authorize } = to.meta\n  if (to.name !== 'Login' && !isValidToken(token)) { next({ name: 'Login' }) }\n  else if (user && !user.is_superuser && authorize && !user.roles.includes(authorize)) {\n    Vue.$toast.open({\n      message: \"Você não tem permissão para executar esta ação\",\n      type: \"error\",\n    })\n  }\n  else next()\n})\n\nexport default router"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,YAAY,QAAQ,yBAAyB;AAEtDF,GAAG,CAACG,GAAG,CAACF,SAAS,CAAC;AAElB,MAAMG,MAAM,GAAGA,CAAA,KAAM,MAAM,EAAC,gCAAiC,eAAe,CAAC;AAE7E,MAAMC,YAAY,GAAG,CACnB;EAAEC,IAAI,EAAE,SAAS;EAAEC,IAAI,EAAE;AAAsB,CAAC,EAChD;EAAED,IAAI,EAAE,mBAAmB;EAAEC,IAAI,EAAE;AAAwB,CAAC,CAC7D;AAED,MAAMC,MAAM,GAAGH,YAAY,CAACI,GAAG,CAACC,KAAK,IAAI;EACvC,OAAO;IACL,GAAGA,KAAK;IACRC,SAAS,EAAEA,CAAA,KAAM,MAAM,EAAC,mCAAqC,WAAUD,KAAK,CAACH,IAAK,EAAC;EACrF,CAAC;AACH,CAAC,CAAC;AAEF,MAAMK,MAAM,GAAG,IAAIX,SAAS,CAAC;EAC3BY,IAAI,EAAE,SAAS;EACfL,MAAM,EAAE,CACN;IACEF,IAAI,EAAE,QAAQ;IACdC,IAAI,EAAE,OAAO;IACbI,SAAS,EAAEA,CAAA,KACT,MAAM,EAAC,+BAAgC,eAAe;EAC1D,CAAC,EACD;IACEL,IAAI,EAAE,GAAG;IACTK,SAAS,EAAEP,MAAM;IACjBU,QAAQ,EAAEN;EACZ,CAAC;AAEL,CAAC,CAAC;AAEFI,MAAM,CAACG,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,sBAAsB,CAAC;EAC1D,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC,CAAC;EAC9D,MAAM;IAAEI;EAAU,CAAC,GAAGT,EAAE,CAACU,IAAI;EAC7B,IAAIV,EAAE,CAACT,IAAI,KAAK,OAAO,IAAI,CAACL,YAAY,CAACiB,KAAK,CAAC,EAAE;IAAED,IAAI,CAAC;MAAEX,IAAI,EAAE;IAAQ,CAAC,CAAC;EAAC,CAAC,MACvE,IAAIe,IAAI,IAAI,CAACA,IAAI,CAACK,YAAY,IAAIF,SAAS,IAAI,CAACH,IAAI,CAACM,KAAK,CAACC,QAAQ,CAACJ,SAAS,CAAC,EAAE;IACnFzB,GAAG,CAAC8B,MAAM,CAACC,IAAI,CAAC;MACdC,OAAO,EAAE,gDAAgD;MACzDC,IAAI,EAAE;IACR,CAAC,CAAC;EACJ,CAAC,MACIf,IAAI,CAAC,CAAC;AACb,CAAC,CAAC;AAEF,eAAeN,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}