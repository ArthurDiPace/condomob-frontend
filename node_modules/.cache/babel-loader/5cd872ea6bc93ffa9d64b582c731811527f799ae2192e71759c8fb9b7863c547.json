{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport SPagebar from \"@/layout/SPagebar.vue\";\nimport VeiculoList from \"../veiculo/VeiculoList.vue\";\nimport PessoaList from \"../pessoa/PessoaList.vue\";\nimport HistoricoList from \"../historico/HistoricoList.vue\";\nimport BoletoList from \"../boleto/BoletoList.vue\";\nimport RequerimentoList from \"../requerimento/RequerimentoList.vue\";\nimport OficioList from \"../oficio/OficioList.vue\";\nimport PromptDialog from \"@/components/PromptDialog.vue\";\nimport VistoriaListComponent from \"../vistoria/VistoriaListComponent.vue\";\nexport default {\n  name: \"PermissaoEdit\",\n  components: {\n    SPagebar,\n    VeiculoList,\n    PessoaList,\n    HistoricoList,\n    BoletoList,\n    RequerimentoList,\n    PromptDialog,\n    OficioList,\n    VistoriaListComponent\n  },\n  data: () => ({\n    breadcrumbs: [{\n      text: \"Permissões\",\n      to: \"/permissao\",\n      exact: true\n    }, {\n      text: \"Detalhes\",\n      disabled: true\n    }],\n    permissao: {},\n    permissaoCarregada: false,\n    isAuthenticated: false,\n    tab: 0,\n    disabledButtons: false\n  }),\n  created() {\n    this.getPermissao(this.$route.params.id);\n  },\n  methods: {\n    async getPermissao(id) {\n      const response = await this.$api.get({\n        resource: this.$endpoints.PERMISSAO,\n        id: id\n      });\n      this.permissao = response.data;\n      this.permissaoCarregada = true;\n    },\n    async salvar() {\n      const res = await this.$refs.prompt.open(\"Requerimento\", \"Informe o número do requerimento\", \"Número do requerimento\");\n      if (res) {\n        this.permissao.numero_requerimento = res;\n        const response = this.$api.update({\n          resource: this.$endpoints.PERMISSAO,\n          id: this.permissao.id,\n          data: {\n            observacao: this.permissao.observacao\n          }\n        });\n        response.then(() => {\n          this.$toast.open({\n            message: 'Registro salvo com sucesso',\n            type: 'success'\n          });\n        });\n      }\n    },\n    incluirPessoa() {\n      this.$router.push(`/pessoa/?permissao=${this.permissao.id}&categoria=${this.permissao.categoria}`);\n    },\n    incluirPessoaPrecadastro() {\n      this.$router.push(`/pessoa/precadastro/?permissao=${this.permissao.id}&categoria=${this.permissao.categoria}`);\n    },\n    incluirRequerimento() {\n      this.$router.push(`/requerimento/cadastrar/?permissao=${this.permissao.id}&categoria=${this.permissao.categoria}`);\n    },\n    incluirVeiculo() {\n      this.$router.push(`/veiculo/?permissao=${this.permissao.id}&categoria=${this.permissao.categoria}`);\n    },\n    incluirVeiculoPrecadastro() {\n      this.$router.push(`/veiculo/precadastro/?permissao=${this.permissao.id}&categoria=${this.permissao.categoria}`);\n    },\n    toggleBloqueio() {\n      const newstatus = !this.permissao.bloqueado;\n      const response = this.$api.update({\n        resource: this.$endpoints.PERMISSAO,\n        id: this.permissao.id,\n        data: {\n          bloqueado: newstatus,\n          id: this.permissao.id\n        }\n      });\n      response.then(() => {\n        this.getPermissao(this.permissao.id);\n      }).catch(error => {\n        console.error(\"Erro ao atualizar o status de bloqueio:\", error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["SPagebar","VeiculoList","PessoaList","HistoricoList","BoletoList","RequerimentoList","OficioList","PromptDialog","VistoriaListComponent","name","components","data","breadcrumbs","text","to","exact","disabled","permissao","permissaoCarregada","isAuthenticated","tab","disabledButtons","created","getPermissao","$route","params","id","methods","response","$api","get","resource","$endpoints","PERMISSAO","salvar","res","$refs","prompt","open","numero_requerimento","update","observacao","then","$toast","message","type","incluirPessoa","$router","push","categoria","incluirPessoaPrecadastro","incluirRequerimento","incluirVeiculo","incluirVeiculoPrecadastro","toggleBloqueio","newstatus","bloqueado","catch","error","console"],"sources":["src/views/permissao/PermissaoEdit.vue"],"sourcesContent":["<template>\n  <v-container fluid>\n    <s-pagebar\n      page-title=\"Detalhes da Permissão\"\n      :breadcrumbs=\"breadcrumbs\"\n    >\n      <v-menu offset-y>\n        <template #activator=\"{ on, attrs }\">\n          <v-btn\n            color=\"blue-grey darken-4\"\n            dark\n            fab\n            small\n            v-bind=\"attrs\"\n            v-on=\"on\"\n          >\n            <v-icon>more_vert</v-icon>\n          </v-btn>\n        </template>\n        <v-list>\n          <v-list-item\n            link\n            :to=\"`historico/${permissao.id}`\"\n          >\n            <v-list-item-title>Visualizar Histórico</v-list-item-title>\n          </v-list-item>\n        </v-list>\n      </v-menu>\n    </s-pagebar>\n    <v-card\n      flat\n      class=\"mb-3\"\n    >\n      <v-card-title>\n        Número de Registro:\n        <span v-if=\"!!permissao.numero\">{{\n          permissao.numero.toString().padStart(4, \"0\")\n        }}</span>\n        <v-chip class=\"ml-3\">\n          {{ permissao.status }}\n        </v-chip>\n      </v-card-title>\n      <v-card-subtitle>\n        Data de Cadastro: {{ permissao.data_cadastro }} - Categoria:\n        <span class=\"text-capitalize\">{{\n          permissao.categoria\n        }}</span>\n      </v-card-subtitle>\n      <v-btn\n        v-permission=\"['core.pode_bloquear_permissao']\"        \n        class=\"ms-4 mt-n3\" \n        dark\n        color=\"blue-grey darken-4\"\n        @click=\"toggleBloqueio\"\n      >\n        {{ permissao.bloqueado ? \"Desbloquear\" : \"Bloquear\" }}\n      </v-btn>\n      <v-card-text>\n        <v-textarea\n          v-model=\"permissao.observacao\"\n          label=\"Observações\"\n          filled\n          class=\"mt-n2\"\n          rows=\"2\"\n          :readonly=\"permissao.bloqueado\"\n        />\n      </v-card-text>\n      <v-card-actions\n        class=\"mt-n10\"\n      >\n        <v-spacer />\n        <v-btn\n          outlined\n          color=\"blue-grey darken-4\"\n          @click=\"$router.push('/permissao')\"\n        >\n          Voltar\n        </v-btn>\n        <v-btn\n          dark\n          color=\"blue-grey darken-4\"\n          :disabled=\"permissao.bloqueado\"\n          @click=\"salvar\"\n        >\n          Salvar\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n\n    <v-card\n      flat\n      class=\"mb-3\"\n    >\n      <v-tabs v-model=\"tab\">\n        <!-- Tabela Pessoas -->\n        <v-tab>\n          PESSOAS\n        </v-tab>\n        <v-tab-item>\n          <v-card>\n            <v-card-title>\n              Pessoas\n              <v-spacer />\n              <v-btn \n                text \n                :disabled=\"permissao.bloqueado\" \n                @click=\"incluirPessoa\"\n              >\n                <v-icon class=\"mr-1\">\n                  add_circle\n                </v-icon>\n                Incluir pessoa\n              </v-btn>\n              <v-btn\n                text\n                :disabled=\"permissao.bloqueado\"\n                @click=\"incluirPessoaPrecadastro\"\n              >\n                <v-icon class=\"mr-1\">\n                  add_circle\n                </v-icon>\n                Incluir pessoa pré-cadastro\n              </v-btn>\n            </v-card-title>\n            <v-card-text>\n              <pessoa-list\n                v-if=\"permissaoCarregada\"\n                :permissao=\"permissao\"\n                :disabled-buttons=\"permissao.bloqueado\"\n              />\n            </v-card-text>\n          </v-card>\n        </v-tab-item>\n\n        <!-- Tabela Veiculos -->\n        <v-tab>\n          VEÍCULOS\n        </v-tab>\n        <v-tab-item>\n          <v-card>\n            <v-card-title>\n              Veículos\n              <v-spacer />\n              <v-btn\n                text\n                :disabled=\"permissao.bloqueado\"\n                @click=\"incluirVeiculo\"\n              >\n                <v-icon class=\"mr-1\">\n                  add_circle\n                </v-icon>\n                Incluir veículo\n              </v-btn>\n              <v-btn\n                text\n                :disabled=\"permissao.bloqueado\"\n                @click=\"incluirVeiculoPrecadastro\"\n              >\n                <v-icon class=\"mr-1\">\n                  add_circle\n                </v-icon>\n                Incluir veículo pré-cadastro\n              </v-btn>\n            </v-card-title>\n            <v-card-text>\n              <veiculo-list\n                v-if=\"permissaoCarregada\"\n                :permissao=\"permissao\"\n                :disabled-buttons=\"permissao.bloqueado\"\n              />\n            </v-card-text>\n          </v-card>\n        </v-tab-item>\n\n        <!-- Tabela Oficios -->\n        <v-tab>\n          OFÍCIOS\n        </v-tab>\n        <v-tab-item>\n          <v-card>\n            <v-card-title> Ofícios </v-card-title>\n            <v-card-text>\n              <OficioList\n                v-if=\"permissaoCarregada\"\n                :permissao=\"permissao\"\n                :disabled-buttons=\"permissao.bloqueado\"\n              />\n            </v-card-text>\n          </v-card>\n        </v-tab-item>\n\n        <!-- Tabela Boletos -->\n        <v-tab>\n          BOLETOS\n        </v-tab>\n        <v-tab-item>\n          <v-card>\n            <v-card-title> Boletos </v-card-title>\n            <v-card-text>\n              <BoletoList\n                v-if=\"permissaoCarregada\"\n                :permissao=\"permissao\"\n              />\n            </v-card-text>\n          </v-card>\n        </v-tab-item>\n\n        <!-- Tabela Vistorias -->\n        <v-tab>\n          VISTORIAS\n        </v-tab>\n        <v-tab-item>\n          <v-card>\n            <v-card-title> Vistorias </v-card-title>\n            <v-card-text>\n              <VistoriaListComponent\n                v-if=\"permissaoCarregada\"\n                :permissao=\"permissao\"\n              />\n            </v-card-text>\n          </v-card>\n        </v-tab-item>\n        \n        <!-- Tabela Requerimentos-->\n        <v-tab>\n          REQUERIMENTOS\n        </v-tab>\n        <v-tab-item>\n          <v-card>\n            <v-card-title>\n              Requerimentos\n              <v-spacer />\n              <v-btn\n                text\n                :disabled=\"permissao.bloqueado\"\n                @click=\"incluirRequerimento\"\n              >\n                <v-icon class=\"mr-1\">\n                  add_circle\n                </v-icon>\n                Incluir requerimento\n              </v-btn>\n            </v-card-title>\n            <v-card-text>\n              <RequerimentoList\n                v-if=\"permissaoCarregada\"\n                :permissao=\"permissao\"\n                :disabled-buttons=\"permissao.bloqueado\"\n              />\n            </v-card-text>\n          </v-card>\n        </v-tab-item>\n\n        <!-- Tabela Historico-->\n        <v-tab>\n          HISTÓRICO\n        </v-tab>\n        <v-tab-item>\n          <v-card>\n            <v-card-title> Histórico </v-card-title>\n            <v-card-text>\n              <HistoricoList\n                v-if=\"permissaoCarregada\"\n                :permissao=\"permissao\"\n              />\n            </v-card-text>\n          </v-card>\n        </v-tab-item>\n      </v-tabs>\n    </v-card>\n    <prompt-dialog ref=\"prompt\" />\n  </v-container>\n</template>\n\n<script>\nimport SPagebar from \"@/layout/SPagebar.vue\";\nimport VeiculoList from \"../veiculo/VeiculoList.vue\";\nimport PessoaList from \"../pessoa/PessoaList.vue\";\nimport HistoricoList from \"../historico/HistoricoList.vue\";\nimport BoletoList from \"../boleto/BoletoList.vue\";\nimport RequerimentoList from \"../requerimento/RequerimentoList.vue\";\nimport OficioList from \"../oficio/OficioList.vue\";\nimport PromptDialog from \"@/components/PromptDialog.vue\";\nimport VistoriaListComponent from \"../vistoria/VistoriaListComponent.vue\";\n\nexport default {\n  name: \"PermissaoEdit\",\n  components: {\n    SPagebar,\n    VeiculoList,\n    PessoaList,\n    HistoricoList,\n    BoletoList,\n    RequerimentoList,\n    PromptDialog,\n    OficioList,\n    VistoriaListComponent,\n  },\n  data: () => ({\n    breadcrumbs: [\n      {\n        text: \"Permissões\",\n        to: \"/permissao\",\n        exact: true,\n      },\n      {\n        text: \"Detalhes\",\n        disabled: true,\n      },\n    ],\n    permissao: {},\n    permissaoCarregada: false,\n    isAuthenticated: false,\n    tab: 0,\n    disabledButtons: false,\n  }),\n  created() {\n    this.getPermissao(this.$route.params.id);\n  },\n  methods: {\n    async getPermissao(id) {\n      const response = await this.$api.get({\n        resource: this.$endpoints.PERMISSAO,\n        id: id,\n      });\n      this.permissao = response.data;\n      this.permissaoCarregada = true;\n    },\n    async salvar() {\n      const res = await this.$refs.prompt.open(\n        \"Requerimento\",\n        \"Informe o número do requerimento\",\n        \"Número do requerimento\"\n      );\n      if (res) {\n        this.permissao.numero_requerimento = res;\n        const response = this.$api.update({\n          resource: this.$endpoints.PERMISSAO,\n          id: this.permissao.id,\n          data: {\n            observacao: this.permissao.observacao,\n          },\n        });\n        response.then(() => {\n          this.$toast.open({\n              message: 'Registro salvo com sucesso',\n              type: 'success',\n          })\n        });\n      }\n    },\n\n    incluirPessoa() {\n      this.$router.push(\n        `/pessoa/?permissao=${this.permissao.id}&categoria=${this.permissao.categoria}`\n      );\n    },\n\n    incluirPessoaPrecadastro() {\n      this.$router.push(\n        `/pessoa/precadastro/?permissao=${this.permissao.id}&categoria=${this.permissao.categoria}`\n      );\n    },\n\n    incluirRequerimento() {\n      this.$router.push(\n        `/requerimento/cadastrar/?permissao=${this.permissao.id}&categoria=${this.permissao.categoria}`\n      );\n    },\n\n    incluirVeiculo() {\n      this.$router.push(\n        `/veiculo/?permissao=${this.permissao.id}&categoria=${this.permissao.categoria}`\n      );\n    },\n\n    incluirVeiculoPrecadastro() {\n      this.$router.push(\n        `/veiculo/precadastro/?permissao=${this.permissao.id}&categoria=${this.permissao.categoria}`\n      );\n    },\n    toggleBloqueio() {\n      const newstatus = !this.permissao.bloqueado;\n      \n      const response = this.$api.update({\n        resource: this.$endpoints.PERMISSAO,\n        id: this.permissao.id,\n        data: {\n          bloqueado: newstatus,    \n          id: this.permissao.id,\n        },\n      });\n      response.then(()=> {\n        this.getPermissao(this.permissao.id)\n      }).catch ((error) => {\n      console.error(\"Erro ao atualizar o status de bloqueio:\", error);\n      })\n    }\n  },\n}\n</script>\n"],"mappings":";AAmRA,OAAAA,QAAA;AACA,OAAAC,WAAA;AACA,OAAAC,UAAA;AACA,OAAAC,aAAA;AACA,OAAAC,UAAA;AACA,OAAAC,gBAAA;AACA,OAAAC,UAAA;AACA,OAAAC,YAAA;AACA,OAAAC,qBAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAV,QAAA;IACAC,WAAA;IACAC,UAAA;IACAC,aAAA;IACAC,UAAA;IACAC,gBAAA;IACAE,YAAA;IACAD,UAAA;IACAE;EACA;EACAG,IAAA,EAAAA,CAAA;IACAC,WAAA,GACA;MACAC,IAAA;MACAC,EAAA;MACAC,KAAA;IACA,GACA;MACAF,IAAA;MACAG,QAAA;IACA,EACA;IACAC,SAAA;IACAC,kBAAA;IACAC,eAAA;IACAC,GAAA;IACAC,eAAA;EACA;EACAC,QAAA;IACA,KAAAC,YAAA,MAAAC,MAAA,CAAAC,MAAA,CAAAC,EAAA;EACA;EACAC,OAAA;IACA,MAAAJ,aAAAG,EAAA;MACA,MAAAE,QAAA,cAAAC,IAAA,CAAAC,GAAA;QACAC,QAAA,OAAAC,UAAA,CAAAC,SAAA;QACAP,EAAA,EAAAA;MACA;MACA,KAAAT,SAAA,GAAAW,QAAA,CAAAjB,IAAA;MACA,KAAAO,kBAAA;IACA;IACA,MAAAgB,OAAA;MACA,MAAAC,GAAA,cAAAC,KAAA,CAAAC,MAAA,CAAAC,IAAA,CACA,gBACA,oCACA,wBACA;MACA,IAAAH,GAAA;QACA,KAAAlB,SAAA,CAAAsB,mBAAA,GAAAJ,GAAA;QACA,MAAAP,QAAA,QAAAC,IAAA,CAAAW,MAAA;UACAT,QAAA,OAAAC,UAAA,CAAAC,SAAA;UACAP,EAAA,OAAAT,SAAA,CAAAS,EAAA;UACAf,IAAA;YACA8B,UAAA,OAAAxB,SAAA,CAAAwB;UACA;QACA;QACAb,QAAA,CAAAc,IAAA;UACA,KAAAC,MAAA,CAAAL,IAAA;YACAM,OAAA;YACAC,IAAA;UACA;QACA;MACA;IACA;IAEAC,cAAA;MACA,KAAAC,OAAA,CAAAC,IAAA,CACA,2BAAA/B,SAAA,CAAAS,EAAA,mBAAAT,SAAA,CAAAgC,SAAA,EACA;IACA;IAEAC,yBAAA;MACA,KAAAH,OAAA,CAAAC,IAAA,CACA,uCAAA/B,SAAA,CAAAS,EAAA,mBAAAT,SAAA,CAAAgC,SAAA,EACA;IACA;IAEAE,oBAAA;MACA,KAAAJ,OAAA,CAAAC,IAAA,CACA,2CAAA/B,SAAA,CAAAS,EAAA,mBAAAT,SAAA,CAAAgC,SAAA,EACA;IACA;IAEAG,eAAA;MACA,KAAAL,OAAA,CAAAC,IAAA,CACA,4BAAA/B,SAAA,CAAAS,EAAA,mBAAAT,SAAA,CAAAgC,SAAA,EACA;IACA;IAEAI,0BAAA;MACA,KAAAN,OAAA,CAAAC,IAAA,CACA,wCAAA/B,SAAA,CAAAS,EAAA,mBAAAT,SAAA,CAAAgC,SAAA,EACA;IACA;IACAK,eAAA;MACA,MAAAC,SAAA,SAAAtC,SAAA,CAAAuC,SAAA;MAEA,MAAA5B,QAAA,QAAAC,IAAA,CAAAW,MAAA;QACAT,QAAA,OAAAC,UAAA,CAAAC,SAAA;QACAP,EAAA,OAAAT,SAAA,CAAAS,EAAA;QACAf,IAAA;UACA6C,SAAA,EAAAD,SAAA;UACA7B,EAAA,OAAAT,SAAA,CAAAS;QACA;MACA;MACAE,QAAA,CAAAc,IAAA;QACA,KAAAnB,YAAA,MAAAN,SAAA,CAAAS,EAAA;MACA,GAAA+B,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,4CAAAA,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}