{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport ConfirmDialog from '@/components/ConfirmDialog.vue';\nimport SPagebar from '@/layout/SPagebar.vue';\nimport * as documentoService from '@/services/documento.service';\nexport default {\n  name: 'VistoriaListBoleto',\n  components: {\n    SPagebar,\n    ConfirmDialog\n  },\n  data: () => ({\n    breadcrumbs: [{\n      'text': 'Consulta',\n      'exact': true\n    }],\n    headers: [{\n      text: 'Placa',\n      value: 'AIT_PLACA'\n    }, {\n      text: 'AIT',\n      value: 'AIT_CODIGO'\n    }, {\n      text: 'AIT valor',\n      value: 'AIT_VALOR_TOTAL'\n    }, {\n      text: 'AIT Nº Ordem',\n      value: 'AIT_NUM_ORDEM'\n    }, {\n      text: 'Ações',\n      value: 'action'\n    }],\n    totalItems: 0,\n    items: [],\n    options: {},\n    filtro: {}\n  }),\n  methods: {\n    async getVistoriaBoleto() {\n      const {\n        sortBy,\n        sortDesc,\n        page,\n        itemsPerPage\n      } = this.options;\n      const query = {\n        page: page,\n        page_size: itemsPerPage,\n        ordering: `${sortDesc && sortDesc[0] ? '-' : ''}${sortBy}`,\n        placa: this.filtro.placa\n      };\n      const response = await this.$api.list({\n        resource: this.$endpoints.VISTORIA_BOLETO,\n        query: query\n      });\n      this.items = response.data;\n      this.totalItems = response.data.count;\n    },\n    limparFiltros() {\n      this.filtro = {\n        placa: null\n      };\n      window.location.reload();\n    },\n    async imprimir(item) {\n      try {\n        const response = await documentoService.carregarArquivo({\n          resource: this.$endpoints.REGISTRAR,\n          data: item\n        });\n        const downloadUrl = window.URL.createObjectURL(response.data);\n        window.open(downloadUrl, '__blank');\n      } catch (error) {\n        this.handleBlobError(error);\n      }\n    },\n    transformToUppercase() {\n      this.filtro.placa = this.filtro.placa.toUpperCase();\n    }\n  }\n};","map":{"version":3,"names":["ConfirmDialog","SPagebar","documentoService","name","components","data","breadcrumbs","headers","text","value","totalItems","items","options","filtro","methods","getVistoriaBoleto","sortBy","sortDesc","page","itemsPerPage","query","page_size","ordering","placa","response","$api","list","resource","$endpoints","VISTORIA_BOLETO","count","limparFiltros","window","location","reload","imprimir","item","carregarArquivo","REGISTRAR","downloadUrl","URL","createObjectURL","open","error","handleBlobError","transformToUppercase","toUpperCase"],"sources":["src/views/vistoria/VistoriaListBoleto.vue"],"sourcesContent":["<template>\n  <v-container fluid>\n    <s-pagebar\n      page-title=\"Consulta\"\n      :breadcrumbs=\"breadcrumbs\"\n    />\n    <v-card flat>\n      <v-card-text>\n        <div class=\"d-flex align-center\">\n          <div style=\"max-width: 200px\">\n            <v-text-field\n              v-model=\"filtro.placa\"\n              label=\"Placa\"\n              class=\"mr-3\"\n              @keyup.enter=\"getVistoriaBoleto\"\n              @input=\"transformToUppercase\"\n            />\n          </div>\n          <v-btn\n            color=\"blue-grey darken-4 mr-3\"\n            dark\n            @click=\"getVistoriaBoleto\"\n          >\n            <v-icon>search</v-icon>\n            Pesquisar\n          </v-btn>\n          <v-btn\n            outlined\n            color=\"blue-grey darken-4\"\n            @click=\"limparFiltros\"\n          >\n            Limpar filtros\n          </v-btn>\n        </div>\n        <v-data-table\n          :headers=\"headers\"\n          :items=\"items\"\n          :options.sync=\"options\"\n          :server-items-length=\"totalItems\"\n          :items-per-page=\"10\"\n          :footer-props=\"{\n            'items-per-page-options': [10, 20, 30]\n          }\"\n        >\n          <template #[`item.action`]=\"{ item }\">\n            <v-toolbar-items>\n              <v-tooltip bottom>\n                <template #activator=\"{ on, attrs }\">\n                  <v-btn\n                    v-bind=\"attrs\"\n                    icon\n                    v-on=\"on\"\n                    @click=\"imprimir(item)\"       \n                  >\n                    <v-icon class=\"material-icons-outlined\">\n                      print\n                    </v-icon>\n                  </v-btn>\n                </template>\n                <span>Imprimir</span>\n              </v-tooltip>\n            </v-toolbar-items>\n          </template>\n        </v-data-table>\n      </v-card-text>\n    </v-card>\n    <ConfirmDialog ref=\"confirm\" />\n  </v-container>\n</template>\n\n<script>\nimport ConfirmDialog from '@/components/ConfirmDialog.vue'\nimport SPagebar from '@/layout/SPagebar.vue'\nimport * as documentoService from '@/services/documento.service'\n\nexport default {\n  name: 'VistoriaListBoleto',\n  components: { SPagebar, ConfirmDialog },\n  data: () => ({\n    breadcrumbs: [\n      {\n        'text': 'Consulta',\n        'exact': true\n      }\n    ],\n    headers: [\n      {text: 'Placa', value: 'AIT_PLACA'},\n      {text: 'AIT', value: 'AIT_CODIGO'},\n      {text: 'AIT valor', value: 'AIT_VALOR_TOTAL'},\n      {text: 'AIT Nº Ordem', value: 'AIT_NUM_ORDEM'},\n      {text: 'Ações', value: 'action'},\n    ],\n    totalItems: 0,\n    items: [],\n    options: {},\n    filtro: {},\n  }),\n  methods: {\n    async getVistoriaBoleto() {\n      const { sortBy, sortDesc, page, itemsPerPage } = this.options\n      const query = {\n        page: page,\n        page_size: itemsPerPage,\n        ordering: `${sortDesc && sortDesc[0] ? '-':''}${sortBy}`,\n        placa: this.filtro.placa,\n      }\n      const response = await this.$api.list({\n        resource: this.$endpoints.VISTORIA_BOLETO,\n        query: query\n      })\n      this.items = response.data\n      this.totalItems = response.data.count\n    },\n    limparFiltros() {\n      this.filtro = {\n        placa: null,\n      }\n      window.location.reload();\n    },\n    async imprimir(item) {\n      try {\n        const response = await documentoService.carregarArquivo({\n          resource: this.$endpoints.REGISTRAR,\n          data: item\n        });\n        const downloadUrl = window.URL.createObjectURL(response.data);\n        window.open(downloadUrl, '__blank');\n      } catch (error) {\n        this.handleBlobError(error);\n      }\n    },\n    transformToUppercase() {\n      this.filtro.placa = this.filtro.placa.toUpperCase();\n    },\n  }\n}\n</script>"],"mappings":";;;AAuEA,OAAAA,aAAA;AACA,OAAAC,QAAA;AACA,YAAAC,gBAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IAAAH,QAAA;IAAAD;EAAA;EACAK,IAAA,EAAAA,CAAA;IACAC,WAAA,GACA;MACA;MACA;IACA,EACA;IACAC,OAAA,GACA;MAAAC,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,EACA;IACAC,UAAA;IACAC,KAAA;IACAC,OAAA;IACAC,MAAA;EACA;EACAC,OAAA;IACA,MAAAC,kBAAA;MACA;QAAAC,MAAA;QAAAC,QAAA;QAAAC,IAAA;QAAAC;MAAA,SAAAP,OAAA;MACA,MAAAQ,KAAA;QACAF,IAAA,EAAAA,IAAA;QACAG,SAAA,EAAAF,YAAA;QACAG,QAAA,KAAAL,QAAA,IAAAA,QAAA,iBAAAD,MAAA;QACAO,KAAA,OAAAV,MAAA,CAAAU;MACA;MACA,MAAAC,QAAA,cAAAC,IAAA,CAAAC,IAAA;QACAC,QAAA,OAAAC,UAAA,CAAAC,eAAA;QACAT,KAAA,EAAAA;MACA;MACA,KAAAT,KAAA,GAAAa,QAAA,CAAAnB,IAAA;MACA,KAAAK,UAAA,GAAAc,QAAA,CAAAnB,IAAA,CAAAyB,KAAA;IACA;IACAC,cAAA;MACA,KAAAlB,MAAA;QACAU,KAAA;MACA;MACAS,MAAA,CAAAC,QAAA,CAAAC,MAAA;IACA;IACA,MAAAC,SAAAC,IAAA;MACA;QACA,MAAAZ,QAAA,SAAAtB,gBAAA,CAAAmC,eAAA;UACAV,QAAA,OAAAC,UAAA,CAAAU,SAAA;UACAjC,IAAA,EAAA+B;QACA;QACA,MAAAG,WAAA,GAAAP,MAAA,CAAAQ,GAAA,CAAAC,eAAA,CAAAjB,QAAA,CAAAnB,IAAA;QACA2B,MAAA,CAAAU,IAAA,CAAAH,WAAA;MACA,SAAAI,KAAA;QACA,KAAAC,eAAA,CAAAD,KAAA;MACA;IACA;IACAE,qBAAA;MACA,KAAAhC,MAAA,CAAAU,KAAA,QAAAV,MAAA,CAAAU,KAAA,CAAAuB,WAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}