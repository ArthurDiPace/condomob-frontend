{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport ConfirmDialog from '@/components/ConfirmDialog.vue';\nimport SPagebar from '@/layout/SPagebar.vue';\nexport default {\n  name: \"ArquivoList\",\n  components: {\n    SPagebar,\n    ConfirmDialog\n  },\n  props: {\n    permissao: Object,\n    disabledButtons: Boolean\n  },\n  data: () => ({\n    headers: [{\n      text: \"Arquivo\",\n      value: \"numero\"\n    }, {\n      text: \"Data do Carregamento\",\n      value: \"data_carregamento\"\n    }, {\n      text: \"Usuario\",\n      value: \"usuario\"\n    }],\n    totalItems: 0,\n    items: [],\n    options: {}\n  }),\n  watch: {\n    options: {\n      handler() {\n        this.getArquivos();\n      },\n      deep: true\n    }\n  },\n  methods: {\n    async getArquivos() {\n      const {\n        sortBy,\n        sortDesc,\n        page,\n        itemsPerPage\n      } = this.options;\n      const query = {\n        arquivo: this.arquivo,\n        page: page,\n        page_size: itemsPerPage,\n        ordering: `${sortDesc && sortDesc[0] ? \"-\" : \"\"}${sortBy}`\n      };\n      const response = await this.$api.list({\n        resource: this.$endpoints.ARQUIVO,\n        query: query\n      });\n      this.items = response.data.results;\n      this.totalItems = response.data.count;\n    },\n    cadastrarArquivo() {\n      this.$router.push('/arquivo/cadastrar');\n    }\n  }\n};","map":{"version":3,"names":["ConfirmDialog","SPagebar","name","components","props","permissao","Object","disabledButtons","Boolean","data","headers","text","value","totalItems","items","options","watch","handler","getArquivos","deep","methods","sortBy","sortDesc","page","itemsPerPage","query","arquivo","page_size","ordering","response","$api","list","resource","$endpoints","ARQUIVO","results","count","cadastrarArquivo","$router","push"],"sources":["src/views/arquivo/ArquivoList.vue"],"sourcesContent":["<template>\n  <v-container fluid>\n    <s-pagebar\n      page-title=\"Arquivos\"\n      :breadcrumbs=\"breadcrumbs\"\n    >\n      <v-btn\n        color=\"blue-grey darken-4\"\n        dark\n        fab\n        small\n        @click=\"cadastrarArquivo\"\n      >\n        <v-icon>add</v-icon>\n      </v-btn>\n    </s-pagebar>    \n    <v-card flat>\n      <v-card-text>\n        <div class=\"d-flex align-center\">\n          <div style=\"max-width: 200px\">\n            <v-text-field\n              v-model=\"filtro.id\"\n              label=\"Registro\"\n              class=\"mr-3\"\n            />\n          </div>\n          <div style=\"max-width: 500px\">\n            <v-autocomplete\n              v-model=\"filtro.status\"\n              label=\"Status\"\n              :items=\"status\"\n              class=\"mr-3\"\n            />\n          </div>\n          <div style=\"max-width: 500px\">\n            <v-text-field\n              v-model=\"filtro.placa\"\n              label=\"Placa\"\n              :items=\"placa\"\n              class=\"mr-3\"\n            />\n          </div>\n          <v-btn\n            color=\"blue-grey darken-4 mr-3\"\n            dark\n            @click=\"getProcesso\"\n          >\n            <v-icon>search</v-icon>\n            Pesquisar\n          </v-btn>\n          <v-btn\n            outlined\n            color=\"blue-grey darken-4\"\n            @click=\"limparFiltros\"\n          >\n            Limpar filtros\n          </v-btn>\n        </div>\n        <v-data-table \n          :headers=\"headers\"\n          :items=\"items\"\n          :options.sync=\"options\"\n          :server-items-length=\"totalItems\"\n          :items-per-page=\"10\"\n          :footer-props=\"{'items-per-page-options': [10, 20, 30]}\"\n        >\n          <template #[`item.id`]=\"{ item }\">\n            <span>{{ item.id.toString().padStart(4, '0') }}</span>\n          </template>\n          <template #[`item.status`]=\"{ item }\">\n            <span v-if=\"item.status=='patio'\">Patio</span>\n            <span v-if=\"item.status=='liberado'\">Liberado</span>\n            <span v-if=\"item.status=='pronto para retirada'\">Pronto para retirada</span>\n            <span v-if=\"item.status=='retirada indisponivel'\">Retirada indispon√≠vel</span>\n          </template>\n          <template #[`item.placa`]=\"{ item }\">\n            <span>{{ item.placa }}</span>\n          </template>\n          <template #[`item.documento`]=\"{ item }\">\n            <v-tooltip top>\n              <template #activator=\"{ on, attrs }\">\n                <v-btn\n                  icon\n                  v-bind=\"attrs\"\n                  :disabled=\"disabledButtons\"\n                  v-on=\"on\"\n                  @click=\"baixarArquivo(item.documento)\"\n                >\n                  <v-icon>file_download</v-icon>\n                </v-btn>\n              </template>\n              <span>Baixar arquivo</span>\n            </v-tooltip>\n          </template>    \n          <template #[`item.documento_saida`]=\"{ item }\">\n            <v-tooltip top>\n              <template #activator=\"{ on, attrs }\">\n                <v-btn\n                  icon\n                  v-bind=\"attrs\"\n                  :disabled=\"disabledButtons\"\n                  v-on=\"on\"\n                  @click=\"baixarArquivo(item.documento_saida)\"\n                >\n                  <v-icon>file_download</v-icon>\n                </v-btn>\n              </template>\n              <span>Baixar arquivo</span>\n            </v-tooltip>\n          </template>                  \n          <template #[`item.actions`]=\"{ item }\">\n            <v-toolbar-items>\n              <v-tooltip bottom>\n                <template #activator=\"{ on, attrs }\">\n                  <v-btn\n                    v-bind=\"attrs\"\n                    icon\n                    v-on=\"on\"\n                    @click=\"editarProcesso(item.id)\"\n                  >\n                    <v-icon class=\"material-icons-outlined\">\n                      visibility\n                    </v-icon>\n                  </v-btn>\n                </template>\n                <span>Editar</span>\n              </v-tooltip>\n              <v-tooltip bottom>\n                <template #activator=\"{ on, attrs }\">\n                  <v-btn\n                    v-bind=\"attrs\"\n                    icon\n                    v-on=\"on\"\n                    @click=\"reimprimirProcesso(item.id)\"         \n                  >\n                    <v-icon class=\"material-icons-outlined\">\n                      print\n                    </v-icon>\n                  </v-btn>\n                </template>\n                <span>Imprimir</span>\n              </v-tooltip>\n            </v-toolbar-items>\n          </template>\n        </v-data-table>\n      </v-card-text>\n    </v-card>\n    <ConfirmDialog ref=\"confirm\" />\n  </v-container>\n</template>\n\n<script>\nimport ConfirmDialog from '@/components/ConfirmDialog.vue'\nimport SPagebar from '@/layout/SPagebar.vue';\n\nexport default {\n    name: \"ArquivoList\",\n    components: { SPagebar, ConfirmDialog },\n    props: {\n        permissao: Object,\n        disabledButtons: Boolean\n    },\n    data: () => ({\n        headers: [\n            { text: \"Arquivo\", value: \"numero\" },\n            { text: \"Data do Carregamento\", value: \"data_carregamento\" },\n            { text: \"Usuario\", value: \"usuario\" },\n        ],\n        totalItems: 0,\n        items: [],\n        options: {},\n    }),\n    watch: {\n        options: {\n            handler() {\n                this.getArquivos();\n            },\n            deep: true\n        },\n    },\n    methods: {\n      async getArquivos() { \n        const { sortBy, sortDesc, page, itemsPerPage } = this.options   \n\n        const query = {\n          arquivo: this.arquivo,\n          page: page,\n          page_size: itemsPerPage,\n          ordering: `${sortDesc && sortDesc[0] ? \"-\" : \"\"}${sortBy}`\n        }\n        const response = await this.$api.list({\n            resource: this.$endpoints.ARQUIVO,\n            query: query\n        });\n        this.items = response.data.results;\n        this.totalItems = response.data.count;\n      },\n      cadastrarArquivo() {\n        this.$router.push('/arquivo/cadastrar')\n      },\n    }\n}\n</script>"],"mappings":";AAwJA,OAAAA,aAAA;AACA,OAAAC,QAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IAAAF,QAAA;IAAAD;EAAA;EACAI,KAAA;IACAC,SAAA,EAAAC,MAAA;IACAC,eAAA,EAAAC;EACA;EACAC,IAAA,EAAAA,CAAA;IACAC,OAAA,GACA;MAAAC,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,EACA;IACAC,UAAA;IACAC,KAAA;IACAC,OAAA;EACA;EACAC,KAAA;IACAD,OAAA;MACAE,QAAA;QACA,KAAAC,WAAA;MACA;MACAC,IAAA;IACA;EACA;EACAC,OAAA;IACA,MAAAF,YAAA;MACA;QAAAG,MAAA;QAAAC,QAAA;QAAAC,IAAA;QAAAC;MAAA,SAAAT,OAAA;MAEA,MAAAU,KAAA;QACAC,OAAA,OAAAA,OAAA;QACAH,IAAA,EAAAA,IAAA;QACAI,SAAA,EAAAH,YAAA;QACAI,QAAA,KAAAN,QAAA,IAAAA,QAAA,iBAAAD,MAAA;MACA;MACA,MAAAQ,QAAA,cAAAC,IAAA,CAAAC,IAAA;QACAC,QAAA,OAAAC,UAAA,CAAAC,OAAA;QACAT,KAAA,EAAAA;MACA;MACA,KAAAX,KAAA,GAAAe,QAAA,CAAApB,IAAA,CAAA0B,OAAA;MACA,KAAAtB,UAAA,GAAAgB,QAAA,CAAApB,IAAA,CAAA2B,KAAA;IACA;IACAC,iBAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}