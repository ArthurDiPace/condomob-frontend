{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport SPagebar from '@/layout/SPagebar.vue';\nimport * as documentoService from '@/services/documento.service';\nimport * as SemobService from '@/services/semob.service';\n// import PromptDialog from '@/components/PromptDialog.vue'\n\nexport default {\n  name: 'DocumentoList',\n  components: {\n    SPagebar\n  },\n  data: () => ({\n    breadcrumbs: [{\n      'text': 'Documentos',\n      'to': '/documento',\n      'exact': true\n    }],\n    pessoasRetornadas: [],\n    pessoa: null,\n    dialogConfirmacao: false,\n    carregandoCondutor: false,\n    documento: {},\n    errors: {},\n    funcoes: [{\n      text: 'Permissionário',\n      value: 'permissionario'\n    }, {\n      text: 'Auxiliar',\n      value: 'auxiliar'\n    }, {\n      text: 'Acompanhante',\n      value: 'acompanhante'\n    }, {\n      text: 'Cooperado',\n      value: 'cooperado'\n    }, {\n      text: 'Condutor',\n      value: 'condutor'\n    }, {\n      text: 'Arrendador',\n      value: 'arrendador'\n    }],\n    tiposDocumento: [{\n      text: \"Alvará\",\n      value: \"alvara\"\n    }, {\n      text: \"Autorização sem sinalização\",\n      value: \"autorizacao_sem_sinalizacao\"\n    }, {\n      text: \"Certidão de IOF\",\n      value: \"certidao_iof\"\n    }, {\n      text: \"Certidão de ICMS\",\n      value: \"certidao_icms\"\n    }, {\n      text: \"Certidão de IPI\",\n      value: \"certidao_ipi\"\n    }, {\n      text: \"Certidão de Sinalização\",\n      value: \"certidao_sinalizacao\"\n    }, {\n      text: \"Certidões Diversas\",\n      value: \"certidoes_diversas\"\n    }, {\n      text: \"Crachá\",\n      value: \"cracha\"\n    }, {\n      text: \"Declaração de Auxiliar\",\n      value: \"declaracao_auxiliar\"\n    }, {\n      text: \"Liberação de veículo\",\n      value: \"liberacao_veiculo\"\n    }, {\n      text: \"Nada Consta\",\n      value: \"nada_consta\"\n    }, {\n      text: \"Ofícios\",\n      value: \"oficios\"\n    },\n    // {text: \"Requerimento\", value: \"requerimento\"},\n    {\n      text: \"Termo de Permissão\",\n      value: \"termo_permissao\"\n    }, {\n      text: \"Unicidade veicular\",\n      value: \"unicidade_veicular\"\n    }, {\n      text: \"Autorização de tráfego\",\n      value: \"autorizacao_trafego\"\n    }],\n    requeridos: [{\n      text: 'Baixa de Escolares',\n      value: 'baixa_escolares'\n    }, {\n      text: 'Cadastro de Escolares',\n      value: 'cadastro_escolares'\n    }, {\n      text: 'Cadastro de Turismo',\n      value: 'cadastro_turismo'\n    }, {\n      text: 'Cadastro motorista auxiliar',\n      value: 'cadastro_auxiliar'\n    }, {\n      text: 'Tempo de serviço',\n      value: 'tempo_servico'\n    }, {\n      text: 'Transferência de alvará',\n      value: 'transferencia_alvara'\n    }],\n    oficioOrgaos: [\"BPTRAN\", \"DETRAN\", \"INMETRO\"],\n    requeridoDetran: [\"Mudança de categoria de particular para aluguel\", \"Mudança de categoria de aluguel para particular\", \"Primeiro licenciamento na categoria de aluguel\", \"Renovação da licença\", \"Transferência de propriedade\", \"Transferência de domicílio\", \"Transferência de Propriedade com mudança de Categoria Particular para Aluguel\", \"Transferência de Propriedade com mudança de Categoria Aluguel para Particular\"],\n    requeridoInmetro: [\"Aferição do taxímetro\", \"Instalação e verificação do taxímetro\", \"Retirada com substituição do taxímetro\", \"Retirada do taxímetro\", \"Transferência de propriedade do taxímetro\", \"Aferição do tacógrafo\", \"Instalação e verificação do tacógrafo\", \"Retirada com substituição do tacógrafo\", \"Retirada do tacógrafo\", \"Transferência de propriedade do tacógrafo\", \"Transferência de domicílio\"],\n    requeridoBptran: [\"Liberação de veículo\"],\n    requerimentos: [\"CADASTRO DE MOTORISTA AUXILIAR\", \"BAIXA DE VEICULO\", \"RENOVACAO DO ALVARA\", \"RENOVACAO DO CRACHA\", \"RENOVAÇÃO DE CRACHÁ DO AUXILIAR\", \"RETIRADA DO TAXIMETRO\", \"SOLICITACOES DE CERTIDOES DE ICMS\", \"SOLICITACOES DE CERTIDOES DE IOF\", \"SOLICITACOES DE CERTIDOES DE IPI\", \"SUBSTITUICAO DE VEICULO\", \"SUBSTITUICAO DO TAXIMETRO\", \"TRANSFERENCIA DE ALVARA\", \"TRANSFERENCIA DE ALVARA COM SUBSTITUICAO DE VEICULO\", \"TROCA DE PERMISSIONÁRIO (MOTORISTA AUXILIAR)\", \"TROCA DE PONTO\"],\n    loading: false\n  }),\n  methods: {\n    consultarCondutor(cpf) {\n      if (cpf && cpf.length >= 11) {\n        this.carregandoCondutor = true;\n        SemobService.buscarCondutor(cpf).then(response => {\n          Object.assign(this.documento, {\n            nome: response.data.nome_condutor,\n            cnh: response.data.num_registro\n          });\n        });\n        this.carregandoCondutor = false;\n      }\n    },\n    salvar() {\n      this.loading = true;\n      if (this.documento.tipo_documento == 'oficios' && this.documento.orgao == 'DETRAN') {\n        this.dialogConfirmacao = true;\n      } else {\n        this.enviarRequisicao();\n      }\n    },\n    // async salvar() {\n    //   this.loading = true\n\n    //   const res = await this.$refs.prompt.open(\n    //   'Requerimento',\n    //   'Informe o número do requerimento',\n    //   'Número do requerimento'\n    //   )\n\n    //   if (res){\n    //     let numero_requerimento = res\n    //     let placa = this.documento.placa\n    //     let numero_documento = this.documento.numero_documento\n\n    //     const response = this.$api.list({\n    //       resource: `${this.$endpoints.PROCESSO}/validar-numero`,\n    //       query: {\n    //         numero_requerimento, \n    //         placa, \n    //         numero_documento,\n    //       },\n    //     })\n    //     response\n    //       .then(()=>{\n    //         if(this.documento.tipo_documento=='oficios' && this.documento.orgao=='DETRAN') {\n    //           this.dialogConfirmacao = true\n    //         } else {\n    //           this.enviarRequisicao()\n    //         }\n    //       })\n    //       .catch(error=>{\n    //         this.errors = this.handleError(error)\n    //       })\n    //   }\n    //   this.loading = false\n    // },\n    enviarRequisicao() {\n      if (typeof this.documento.requerido === 'string') this.documento.requerido = this.documento.requerido.split();\n      let request = documentoService.carregarArquivo({\n        resource: this.$endpoints.DOCUMENTO,\n        data: this.documento\n      });\n      request.then(response => {\n        this.loading = false;\n        const downloadUrl = window.URL.createObjectURL(response.data);\n        window.open(downloadUrl, '__blank');\n        // var url = window.URL.createObjectURL(response.data)\n        // var a = document.createElement('a')\n        // a.href = url\n        // a.download = `${this.documento.tipo_documento}.pdf`\n        // a.click()\n        // a.remove()\n        // setTimeout(() => window.URL.revokeObjectURL(url), 100)\n      }).catch(error => {\n        this.handleBlobError(error);\n        this.loading = false;\n      });\n    },\n    async filtrarPessoasPorFuncao() {\n      try {\n        const requestData = {\n          funcao: this.documento.funcao,\n          categoria: this.documento.categoria\n        };\n        const response = await this.$api.list({\n          resource: this.$endpoints.PESSOA,\n          query: requestData\n        });\n        if (response.data && Array.isArray(response.data.results)) {\n          this.pessoasRetornadas = response.data.results;\n        } else {\n          this.pessoasRetornadas = [];\n        }\n      } catch (error) {\n        this.handleBlobError(error);\n        this.pessoasRetornadas = [];\n      }\n    },\n    closeDialogConfirmacao() {\n      this.loading = false;\n      this.dialogConfirmacao = false;\n    },\n    saveDialogConfirmacao() {\n      this.enviarRequisicao();\n      this.dialogConfirmacao = false;\n    }\n  }\n};","map":{"version":3,"names":["SPagebar","documentoService","SemobService","name","components","data","breadcrumbs","pessoasRetornadas","pessoa","dialogConfirmacao","carregandoCondutor","documento","errors","funcoes","text","value","tiposDocumento","requeridos","oficioOrgaos","requeridoDetran","requeridoInmetro","requeridoBptran","requerimentos","loading","methods","consultarCondutor","cpf","length","buscarCondutor","then","response","Object","assign","nome","nome_condutor","cnh","num_registro","salvar","tipo_documento","orgao","enviarRequisicao","requerido","split","request","carregarArquivo","resource","$endpoints","DOCUMENTO","downloadUrl","window","URL","createObjectURL","open","catch","error","handleBlobError","filtrarPessoasPorFuncao","requestData","funcao","categoria","$api","list","PESSOA","query","Array","isArray","results","closeDialogConfirmacao","saveDialogConfirmacao"],"sources":["src/views/documento/DocumentoList.vue"],"sourcesContent":["<template>\n  <v-container fluid>\n    <s-pagebar\n      page-title=\"Emitir Documento\"\n      :breadcrumbs=\"breadcrumbs\"\n    />\n    <v-card flat>\n      <v-card-text>\n        <v-row dense>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-autocomplete\n              v-model=\"documento.tipo_documento\"\n              :items=\"tiposDocumento\"\n              label=\"Tipo de Documento\"\n              :error-messages=\"errors.tipo_documento\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"documento.tipo_documento=='oficios'\"\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-radio-group\n              v-model=\"documento.tipo_veiculo\"\n              row\n              :error-messages=\"errors.tipo_veiculo\"\n            >\n              <v-radio\n                label=\"Veículo Sem Placa\"\n                value=\"veiculo_novo\"\n              />\n              <v-radio\n                label=\"Veículo Existente\"\n                value=\"veiculo_existente\"\n              />\n            </v-radio-group>\n          </v-col>\n          <v-col\n            v-if=\"documento.tipo_documento!='declaracao_auxiliar' && documento.tipo_documento!='certidoes_diversas' && documento.tipo_documento!='liberacao_veiculo'\"\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-radio-group\n              v-model=\"documento.categoria\"\n              row\n              :error-messages=\"errors.categoria\"\n            >\n              <v-radio\n                label=\"Táxi\"\n                value=\"taxi\"\n              />\n              <v-radio\n                label=\"Escolar\"\n                value=\"escolar\"\n              />\n              <v-radio\n                label=\"Turismo\"\n                value=\"turismo\"\n              />\n              <v-radio\n                label=\"Fretamento\"\n                value=\"fretamento\"\n              />\n            </v-radio-group>\n          </v-col>\n          <v-col\n            v-if=\"documento.tipo_veiculo=='veiculo_existente' && documento.categoria=='turismo' || documento.tipo_veiculo=='veiculo_existente' && documento.categoria =='fretamento'\"\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-select\n              v-model=\"documento.funcao\"\n              :items=\"funcoes\"\n              label=\"Função\"\n              :error-messages=\"errors.funcao\"\n              @change=\"filtrarPessoasPorFuncao\"\n            />\n            <v-autocomplete\n              v-if=\"documento.funcao\"\n              v-model=\"documento.pessoa\"\n              :items=\"pessoasRetornadas\"\n              item-text=\"nome\"\n              item-value=\"id\"\n              label=\"Pessoa\"\n              :error-messages=\"errors.pessoa\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"documento.tipo_veiculo=='veiculo_existente'\"\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"documento.placa\"\n              label=\"Placa do Veículo\"\n              :error-messages=\"errors.placa\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"documento.tipo_veiculo=='veiculo_novo'\"\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"documento.numero_documento\"\n              label=\"CPF/CNPJ\"\n              :error-messages=\"errors.numero_documento\"\n              @input=\"consultarCondutor\"\n            />\n            <v-text-field\n              v-model=\"documento.nome\"\n              label=\"Nome\"\n              :error-messages=\"errors.nome\"\n              :loading=\"carregandoCondutor\"\n            />\n            <v-text-field\n              v-model=\"documento.cnh\"\n              label=\"CNH\"\n              :error-messages=\"errors.cnh\"\n              :loading=\"carregandoCondutor\"\n            />\n            <v-text-field\n              v-model=\"documento.chassi\"\n              label=\"Chassi do Veículo\"\n              :error-messages=\"errors.chassi\"\n            />\n            <v-text-field\n              v-if=\"documento.categoria=='taxi'\"\n              v-model=\"documento.taximetro\"\n              label=\"Taxímetro\"\n              :error-messages=\"errors.taximetro\"\n            />\n            <v-text-field\n              v-if=\"documento.categoria=='taxi'\"\n              v-model=\"documento.ponto\"\n              label=\"Ponto\"\n              :error-messages=\"errors.ponto\"\n            />\n            <v-text-field\n              v-if=\"documento.categoria=='escolar'\"\n              v-model=\"documento.tacografo\"\n              label=\"Tacógrafo\"\n              :error-messages=\"errors.tacografo\"\n            />\n            <v-text-field\n              v-if=\"documento.categoria=='escolar'\"\n              v-model=\"documento.inscricao_municipal\"\n              label=\"Inscrição Municipal\"\n              :error-messages=\"errors.inscricao_municipal\"\n            />\n            <v-text-field\n              v-if=\"documento.categoria=='turismo'\"\n              v-model=\"documento.registro_turismo\"\n              label=\"Registro Ministério Turismo\"\n              :error-messages=\"errors.registro_turismo\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"documento.tipo_documento!='declaracao_auxiliar' && documento.tipo_documento!='cracha' && documento.tipo_documento!='certidoes_diversas' && documento.tipo_documento!='oficios'\"\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"documento.placa\"\n              label=\"Placa do Veículo\"\n              :error-messages=\"errors.placa\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"documento.tipo_documento=='autorizacao_sem_sinalizacao'\"\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"documento.dias\"\n              label=\"Dias\"\n              :error-messages=\"errors.dias\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"documento.tipo_documento=='autorizacao_trafego'\"\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"documento.data_final\"\n              v-mask=\"['##/##/####']\"\n              label=\"Data Final\"\n              :error-messages=\"errors.data_final\"\n            />\n            <v-text-field\n              v-model=\"documento.motivo_da_autorizacao\"\n              label=\"Motivo da Autorização\"\n              :error-messages=\"errors.motivo_da_autorizacao\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"documento.tipo_documento=='certidao_sinalizacao'\"\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"documento.empresa\"\n              label=\"Empresa\"\n              :error-messages=\"errors.empresa\"\n            />\n            <v-text-field\n              v-model=\"documento.telefone\"\n              label=\"Telefone\"\n              :error-messages=\"errors.telefone\"\n            />\n            <v-text-field\n              v-model=\"documento.contato\"\n              label=\"Contato\"\n              :error-messages=\"errors.contato\"\n            />\n            <v-text-field\n              v-model=\"documento.endereco\"\n              label=\"Endereço\"\n              :error-messages=\"errors.endereco\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"documento.tipo_documento=='certidoes_diversas'\"\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-row dense>\n              <v-col\n                cols=\"12\"\n                sm=\"12\"\n              >\n                <v-autocomplete\n                  v-model=\"documento.requerido\"\n                  :items=\"requeridos\"\n                  label=\"Requerido\"\n                  :error-messages=\"errors.requerido\"\n                />\n              </v-col>\n            </v-row>\n            <v-row\n              v-if=\"documento.requerido=='baixa_escolares'\"\n              dense\n            >\n              <v-col\n                cols=\"12\"\n                sm=\"12\"\n                md=\"6\"\n              >\n                <v-text-field\n                  v-model=\"documento.numero_documento\"\n                  v-mask=\"['##############', '###########']\"\n                  label=\"CPF/CNPJ\"\n                  :error-messages=\"errors.numero_documento\"\n                />\n              </v-col>\n              <v-col\n                cols=\"12\"\n                sm=\"12\"\n                md=\"6\"\n              >\n                <v-text-field\n                  v-model=\"documento.placa\"\n                  label=\"Placa\"\n                  :error-messages=\"errors.placa\"\n                />\n              </v-col>\n              <!-- <v-col\n                cols=\"12\"\n                sm=\"12\"\n                md=\"4\"\n              >\n                <v-text-field\n                  v-model=\"documento.data_baixa\"\n                  v-mask=\"['##/##/####']\"\n                  label=\"Data Baixa\"\n                  :error-messages=\"errors.data_baixa\"\n                />\n              </v-col> -->\n            </v-row>\n            <v-row\n              v-if=\"documento.requerido == 'cadastro_turismo' || documento.requerido == 'cadastro_auxiliar'|| documento.requerido == 'cadastro_escolares' || documento.requerido == 'transferencia_alvara'\"\n              dense\n            >\n              <v-col\n                cols=\"12\"\n                sm=\"12\"\n                md=\"6\"\n              >\n                <v-text-field\n                  v-model=\"documento.numero_documento\"\n                  v-mask=\"['##############', '###########']\"\n                  label=\"CPF/CNPJ\"\n                  :error-messages=\"errors.numero_documento\"\n                />\n              </v-col>\n              <v-col\n                cols=\"12\"\n                sm=\"12\"\n                md=\"6\"\n              >\n                <v-text-fieldnumero_do\n                  v-model=\"documento.numero_processo\"\n                  label=\"N° Processo\"\n                  :error-messages=\"errors.numero_processo\"\n                />\n              </v-col>\n            </v-row>\n            <v-row\n              v-if=\"documento.requerido=='tempo_servico'\"\n              dense\n            >\n              <v-col\n                cols=\"12\"\n                sm=\"12\"\n                md=\"6\"\n              >\n                <v-text-field\n                  v-model=\"documento.numero_documento\"\n                  v-mask=\"['##############', '###########']\"\n                  label=\"CPF/CNPJ\"\n                  :error-messages=\"errors.numero_documento\"\n                />\n              </v-col>\n              <v-col\n                cols=\"12\"\n                sm=\"12\"\n                md=\"6\"\n              >\n                <v-text-field\n                  v-model=\"documento.placa\"\n                  label=\"Placa\"\n                  :error-messages=\"errors.placa\"\n                />\n              </v-col>\n            </v-row>\n          </v-col>\n          <v-col\n            v-if=\"documento.tipo_documento=='liberacao_veiculo'\"\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-row dense>\n              <v-col\n                cols=\"12\"\n                sm=\"12\"\n              >\n                <v-text-field\n                  v-model=\"documento.data_blitz\"\n                  v-mask=\"['##/##/####']\"\n                  label=\"Data da Blitz\"\n                  :error-messages=\"errors.data_blitz\"\n                />\n              </v-col>\n            </v-row>\n          </v-col>\n          <v-col\n            v-if=\"documento.tipo_documento=='oficios'\"\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-autocomplete\n              v-model=\"documento.orgao\"\n              :items=\"oficioOrgaos\"\n              label=\"Órgão de Destino\"\n              :error-messages=\"errors.orgao\"\n              @change=\"documento.requerido=[]\"\n            />\n            <v-autocomplete\n              v-if=\"documento.orgao=='BPTRAN'\"\n              v-model=\"documento.requerido\"\n              :items=\"requeridoBptran\"\n              label=\"Requerido\"\n              multiple\n              :error-messages=\"errors.requerido\"\n            />\n            <v-autocomplete\n              v-if=\"documento.orgao=='DETRAN'\"\n              v-model=\"documento.requerido\"\n              :items=\"requeridoDetran\"\n              label=\"Requerido\"\n              :error-messages=\"errors.requerido\"\n            />\n            <v-text-field\n              v-if=\"documento.orgao=='DETRAN'\"\n              v-model=\"documento.exercicio\"\n              v-mask=\"['####']\"\n              label=\"Exercicio\"\n              :error-messages=\"errors.exercicio\"\n            />\n            <v-autocomplete\n              v-if=\"documento.orgao=='INMETRO'\"\n              v-model=\"documento.requerido\"\n              :items=\"requeridoInmetro\"\n              label=\"Requerido\"\n              multiple\n              :error-messages=\"errors.requerido\"\n            />\n            <v-textarea\n              v-model=\"documento.observacao\"\n              label=\"Observação\"\n              :error-messages=\"errors.observacao\"\n              filled\n            />\n          </v-col>\n          <v-col\n            v-if=\"documento.tipo_documento=='requerimento'\"\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-autocomplete\n              v-model=\"documento.requerimento\"\n              :items=\"requerimentos\"\n              label=\"Requerido\"\n              multiple\n              :error-messages=\"errors.requerimento\"\n            />\n            <v-textarea\n              v-model=\"documento.observacao\"\n              label=\"Observação\"\n              :error-messages=\"errors.observacao\"\n              filled\n            />\n          </v-col>\n          <v-col\n            v-if=\"documento.tipo_documento=='cracha'\"\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"documento.numero_documento\"\n              label=\"CPF ou CNPJ\"\n              :error-messages=\"errors.numero_documento\"\n            />\n          </v-col>\n        </v-row>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer />\n        <v-btn\n          outlined\n          color=\"blue-grey darken-4\"\n          @click=\"$router.back()\"\n        >\n          Voltar\n        </v-btn>\n        <v-btn\n          color=\"blue-grey darken-4\"\n          dark\n          :loading=\"loading\"\n          @click=\"salvar\"\n        >\n          Gerar\n        </v-btn>\n      </v-card-actions>\n      <!-- <prompt-dialog ref=\"prompt\" /> -->\n    </v-card>\n\n    <v-dialog\n      v-model=\"dialogConfirmacao\"\n      persistent\n      width=\"1024\"\n    >\n      <v-card>\n        <v-card-title>\n          <span class=\"text-h5\">Confirme os dados para envio do ofício</span>\n        </v-card-title>\n        <v-card-text>\n          <v-row\n            v-if=\"documento.tipo_veiculo=='veiculo_novo'\"\n            dense\n          >\n            <v-col\n              cols=\"12\"\n              sm=\"12\"\n              md=\"2\"\n            >\n              <v-text-field\n                v-model=\"documento.numero_documento\"\n                label=\"CPF\"\n              />\n            </v-col>\n            <v-col\n              cols=\"12\"\n              sm=\"12\"\n              md=\"6\"\n            >\n              <v-text-field\n                v-model=\"documento.nome\"\n                label=\"Nome\"\n              />\n            </v-col>\n            <v-col\n              cols=\"12\"\n              sm=\"12\"\n              md=\"2\"\n            >\n              <v-text-field\n                v-model=\"documento.cnh\"\n                label=\"CNH\"\n              />\n            </v-col>\n            <v-col\n              cols=\"12\"\n              sm=\"12\"\n              md=\"2\"\n            >\n              <v-text-field\n                v-model=\"documento.chassi\"\n                label=\"Chassi\"\n              />\n            </v-col>\n            <v-col\n              cols=\"12\"\n              sm=\"12\"\n            >\n              <v-text-field\n                v-model=\"documento.requerido\"\n                label=\"Requerido\"\n              />\n            </v-col>\n          </v-row>\n          <v-row\n            v-if=\"documento.tipo_veiculo=='veiculo_existente'\"\n            dense\n          >\n            <v-col\n              cols=\"12\"\n              sm=\"12\"\n              md=\"3\"\n            >\n              <v-text-field\n                v-model=\"documento.placa\"\n                label=\"Placa\"\n              />\n            </v-col>\n            <v-col\n              cols=\"12\"\n              sm=\"12\"\n              md=\"9\"\n            >\n              <v-text-field\n                v-model=\"documento.requerido\"\n                label=\"Requerido\"\n              />\n            </v-col>\n          </v-row>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer />\n          <v-btn\n            color=\"grey\"\n            text\n            class=\"body-2 font-weight-bold\"\n            @click=\"closeDialogConfirmacao\"\n          >\n            Cancelar\n          </v-btn>\n          <v-btn\n            color=\"primary\"\n            class=\"body-2 font-weight-bold\"\n            text\n            @click=\"saveDialogConfirmacao\"\n          >\n            Confirmar\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n  \n<script>\nimport SPagebar from '@/layout/SPagebar.vue'\nimport * as documentoService from '@/services/documento.service'\nimport * as SemobService from '@/services/semob.service'\n// import PromptDialog from '@/components/PromptDialog.vue'\n\nexport default {\n  name: 'DocumentoList',\n  components: { SPagebar },\n  data: () => ({\n    breadcrumbs: [\n      {\n        'text': 'Documentos',\n        'to': '/documento',\n        'exact': true\n      },\n    ],\n    pessoasRetornadas: [],\n    pessoa: null,\n    dialogConfirmacao: false,\n    carregandoCondutor: false,\n    documento: {},\n    errors: {},\n    funcoes: [\n      {text: 'Permissionário', value: 'permissionario'},\n      {text: 'Auxiliar', value: 'auxiliar'},\n      {text: 'Acompanhante', value: 'acompanhante'},\n      {text: 'Cooperado', value: 'cooperado'},\n      {text: 'Condutor', value: 'condutor'},\n      {text: 'Arrendador', value: 'arrendador'},\n    ],\n    tiposDocumento: [\n      {text: \"Alvará\", value: \"alvara\"},\n      {text: \"Autorização sem sinalização\", value: \"autorizacao_sem_sinalizacao\"},\n      {text: \"Certidão de IOF\", value: \"certidao_iof\"},\n      {text: \"Certidão de ICMS\", value: \"certidao_icms\"},\n      {text: \"Certidão de IPI\", value: \"certidao_ipi\"},\n      {text: \"Certidão de Sinalização\", value: \"certidao_sinalizacao\"},\n      {text: \"Certidões Diversas\", value: \"certidoes_diversas\"},\n      {text: \"Crachá\", value: \"cracha\"},\n      {text: \"Declaração de Auxiliar\", value: \"declaracao_auxiliar\"},\n      {text: \"Liberação de veículo\", value: \"liberacao_veiculo\"},\n      {text: \"Nada Consta\", value: \"nada_consta\"},\n      {text: \"Ofícios\", value: \"oficios\"},\n      // {text: \"Requerimento\", value: \"requerimento\"},\n      {text: \"Termo de Permissão\", value: \"termo_permissao\"},\n      {text: \"Unicidade veicular\", value: \"unicidade_veicular\"},\n      {text: \"Autorização de tráfego\", value: \"autorizacao_trafego\"}\n    ],\n    requeridos: [\n      {text: 'Baixa de Escolares', value: 'baixa_escolares'}, \n      {text: 'Cadastro de Escolares', value: 'cadastro_escolares'},\n      {text: 'Cadastro de Turismo', value: 'cadastro_turismo'},\n      {text: 'Cadastro motorista auxiliar', value: 'cadastro_auxiliar'},\n      {text: 'Tempo de serviço', value: 'tempo_servico'},\n      {text: 'Transferência de alvará', value: 'transferencia_alvara'},\n    ],\n    oficioOrgaos: [\n      \"BPTRAN\",\n      \"DETRAN\",\n      \"INMETRO\",\n    ],\n    requeridoDetran: [\n      \"Mudança de categoria de particular para aluguel\",\n      \"Mudança de categoria de aluguel para particular\",\n      \"Primeiro licenciamento na categoria de aluguel\",\n      \"Renovação da licença\",\n      \"Transferência de propriedade\",\n      \"Transferência de domicílio\",\n      \"Transferência de Propriedade com mudança de Categoria Particular para Aluguel\",\n      \"Transferência de Propriedade com mudança de Categoria Aluguel para Particular\",\n    ],\n    requeridoInmetro: [\n      \"Aferição do taxímetro\",\n      \"Instalação e verificação do taxímetro\",\n      \"Retirada com substituição do taxímetro\",\n      \"Retirada do taxímetro\",\n      \"Transferência de propriedade do taxímetro\",\n      \"Aferição do tacógrafo\",\n      \"Instalação e verificação do tacógrafo\",\n      \"Retirada com substituição do tacógrafo\",\n      \"Retirada do tacógrafo\",\n      \"Transferência de propriedade do tacógrafo\",\n      \"Transferência de domicílio\",\n    ],\n    requeridoBptran: [\n      \"Liberação de veículo\",\n    ],\n    requerimentos: [\n      \"CADASTRO DE MOTORISTA AUXILIAR\",\n      \"BAIXA DE VEICULO\",\n      \"RENOVACAO DO ALVARA\",\n      \"RENOVACAO DO CRACHA\",\n      \"RENOVAÇÃO DE CRACHÁ DO AUXILIAR\",\n      \"RETIRADA DO TAXIMETRO\",\n      \"SOLICITACOES DE CERTIDOES DE ICMS\",\n      \"SOLICITACOES DE CERTIDOES DE IOF\",\n      \"SOLICITACOES DE CERTIDOES DE IPI\",\n      \"SUBSTITUICAO DE VEICULO\",\n      \"SUBSTITUICAO DO TAXIMETRO\",\n      \"TRANSFERENCIA DE ALVARA\",\n      \"TRANSFERENCIA DE ALVARA COM SUBSTITUICAO DE VEICULO\",\n      \"TROCA DE PERMISSIONÁRIO (MOTORISTA AUXILIAR)\",\n      \"TROCA DE PONTO\",\n    ],\n    loading: false,\n  }),\n  methods: {\n    consultarCondutor(cpf) {\n      if(cpf && cpf.length >= 11) {\n        this.carregandoCondutor = true\n        SemobService.buscarCondutor(cpf).then(response => {\n          Object.assign(this.documento, {\n            nome: response.data.nome_condutor,\n            cnh: response.data.num_registro,\n          })\n        })\n        this.carregandoCondutor = false\n      }\n    },\n    salvar() {\n        this.loading = true\n        if(this.documento.tipo_documento=='oficios' && this.documento.orgao=='DETRAN') {\n          this.dialogConfirmacao = true\n        } else {\n          this.enviarRequisicao()\n        }\n    },\n      // async salvar() {\n      //   this.loading = true\n\n      //   const res = await this.$refs.prompt.open(\n      //   'Requerimento',\n      //   'Informe o número do requerimento',\n      //   'Número do requerimento'\n      //   )\n\n      //   if (res){\n      //     let numero_requerimento = res\n      //     let placa = this.documento.placa\n      //     let numero_documento = this.documento.numero_documento\n\n      //     const response = this.$api.list({\n      //       resource: `${this.$endpoints.PROCESSO}/validar-numero`,\n      //       query: {\n      //         numero_requerimento, \n      //         placa, \n      //         numero_documento,\n      //       },\n      //     })\n      //     response\n      //       .then(()=>{\n      //         if(this.documento.tipo_documento=='oficios' && this.documento.orgao=='DETRAN') {\n      //           this.dialogConfirmacao = true\n      //         } else {\n      //           this.enviarRequisicao()\n      //         }\n      //       })\n      //       .catch(error=>{\n      //         this.errors = this.handleError(error)\n      //       })\n      //   }\n      //   this.loading = false\n      // },\n    enviarRequisicao() {\n      if (typeof this.documento.requerido === 'string') this.documento.requerido = this.documento.requerido.split();\n\n      let request = documentoService.carregarArquivo({\n        resource: this.$endpoints.DOCUMENTO,\n        data: this.documento\n      })\n      request\n        .then(response => {\n          this.loading = false\n          const downloadUrl = window.URL.createObjectURL(response.data)\n          window.open(downloadUrl, '__blank')\n          // var url = window.URL.createObjectURL(response.data)\n          // var a = document.createElement('a')\n          // a.href = url\n          // a.download = `${this.documento.tipo_documento}.pdf`\n          // a.click()\n          // a.remove()\n          // setTimeout(() => window.URL.revokeObjectURL(url), 100)\n        })\n        .catch((error) => {\n          this.handleBlobError(error)\n          this.loading = false\n        });\n    },\n    async filtrarPessoasPorFuncao() {\n      try {\n        const requestData = {\n          funcao: this.documento.funcao,\n          categoria: this.documento.categoria\n        };\n\n        const response = await this.$api.list({\n          resource: this.$endpoints.PESSOA,\n          query: requestData\n        });\n\n        if (response.data && Array.isArray(response.data.results)) {\n          this.pessoasRetornadas = response.data.results;\n        } else {\n          this.pessoasRetornadas = [];\n        }\n      } catch (error) {\n        this.handleBlobError(error);\n        this.pessoasRetornadas = [];\n      }\n    },\n    closeDialogConfirmacao() {\n      this.loading = false\n      this.dialogConfirmacao = false\n    },\n    saveDialogConfirmacao() {\n      this.enviarRequisicao()\n      this.dialogConfirmacao = false\n    },\n  }    \n}\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}