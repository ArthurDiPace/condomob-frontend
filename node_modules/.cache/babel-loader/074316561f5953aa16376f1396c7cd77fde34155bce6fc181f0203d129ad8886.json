{"ast":null,"code":"import SPagebar from '@/layout/SPagebar.vue';\nimport PromptDialog from '@/components/PromptDialog.vue';\nexport default {\n  name: 'ArquivoCreate',\n  components: {\n    SPagebar,\n    PromptDialog\n  },\n  data: () => ({\n    carregando: false,\n    breadcrumbs: [{\n      'text': 'Arquivo',\n      'to': '/arquivo',\n      'exact': true\n    }, {\n      'text': 'Detalhes',\n      'disabled': true\n    }, {\n      'text': 'Incluir arquivo',\n      'disabled': true\n    }],\n    arquivo: {},\n    errors: {}\n  }),\n  methods: {\n    handleFileUpload(file) {\n      this.arquivo = file;\n    },\n    async salvar() {\n      this.carregando = true;\n      const formData = new FormData();\n      formData.append('documento', this.arquivo);\n      const response = this.$api.create({\n        resource: this.$endpoints.ARQUIVO,\n        data: formData,\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      response.then(() => {\n        this.$toast.open({\n          message: 'Arquivo gerado com sucesso',\n          type: 'success'\n        });\n        this.carregando = false;\n        this.$router.back();\n      }).catch(error => {\n        this.carregando = false;\n        this.errors = this.handleError(error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["SPagebar","PromptDialog","name","components","data","carregando","breadcrumbs","arquivo","errors","methods","handleFileUpload","file","salvar","formData","FormData","append","response","$api","create","resource","$endpoints","ARQUIVO","headers","then","$toast","open","message","type","$router","back","catch","error","handleError"],"sources":["src/views/arquivo/ArquivoCreate.vue"],"sourcesContent":["<template>\n  <v-container fluid>\n    <s-pagebar\n      page-title=\"Incluir Arquivo\"\n      :breadcrumbs=\"breadcrumbs\"\n    />\n    <v-card flat>\n      <v-card-text>\n        <v-row dense>\n          <v-col\n            cols=\"12\"\n            md=\"6\"\n            sm=\"4\"\n          >\n            <v-file-input\n              label=\"Arquivo\"\n              :error-messages=\"errors.documento\"\n              accept=\".csv\"\n              :loading=\"carregando\"\n              @change=\"handleFileUpload\"\n            />\n          </v-col>\n        </v-row>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer />\n        <v-btn\n          outlined\n          color=\"blue-grey darken-4\"\n          @click=\"$router.back()\"\n        >\n          Voltar\n        </v-btn>\n        <v-btn\n          color=\"blue-grey darken-4\"\n          dark\n          @click=\"salvar\"\n        >\n          Carregar\n        </v-btn>\n      </v-card-actions>\n      <prompt-dialog ref=\"prompt\" />\n    </v-card>\n  </v-container>\n</template>\n\n<script>\nimport SPagebar from '@/layout/SPagebar.vue'\nimport PromptDialog from '@/components/PromptDialog.vue'\n\nexport default {\n  name: 'ArquivoCreate',\n  components: { SPagebar, PromptDialog },\n  data: () => ({\n    carregando: false,\n    breadcrumbs: [\n      {\n        'text': 'Arquivo',\n        'to': '/arquivo',\n        'exact': true\n      },\n      {\n        'text': 'Detalhes',\n        'disabled': true\n      },\n      {\n        'text': 'Incluir arquivo',\n        'disabled': true\n      }\n    ],\n    arquivo: {},\n    errors: {}\n  }),\n  methods: {\n    handleFileUpload(file) {\n      this.arquivo = file\n    },\n    async salvar() { \n      this.carregando = true;\n\n      const formData = new FormData();\n      formData.append('documento', this.arquivo);\n\n      const response = this.$api.create({\n        resource: this.$endpoints.ARQUIVO,\n        data: formData,\n        headers: { 'Content-Type': 'multipart/form-data' }\n      })\n      response\n        .then(()=>{\n          this.$toast.open({\n              message: 'Arquivo gerado com sucesso',\n              type: 'success',\n          })\n          this.carregando = false\n          this.$router.back()\n        })\n        .catch(error=>{\n          this.carregando = false\n          this.errors = this.handleError(error)\n        })\n    }\n  }\n}\n</script>\n\n<style>\n.required label::after {\n    content: \"*\";\n    color: red;\n}\n</style>"],"mappings":"AA+CA,OAAAA,QAAA;AACA,OAAAC,YAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IAAAH,QAAA;IAAAC;EAAA;EACAG,IAAA,EAAAA,CAAA;IACAC,UAAA;IACAC,WAAA,GACA;MACA;MACA;MACA;IACA,GACA;MACA;MACA;IACA,GACA;MACA;MACA;IACA,EACA;IACAC,OAAA;IACAC,MAAA;EACA;EACAC,OAAA;IACAC,iBAAAC,IAAA;MACA,KAAAJ,OAAA,GAAAI,IAAA;IACA;IACA,MAAAC,OAAA;MACA,KAAAP,UAAA;MAEA,MAAAQ,QAAA,OAAAC,QAAA;MACAD,QAAA,CAAAE,MAAA,mBAAAR,OAAA;MAEA,MAAAS,QAAA,QAAAC,IAAA,CAAAC,MAAA;QACAC,QAAA,OAAAC,UAAA,CAAAC,OAAA;QACAjB,IAAA,EAAAS,QAAA;QACAS,OAAA;UAAA;QAAA;MACA;MACAN,QAAA,CACAO,IAAA;QACA,KAAAC,MAAA,CAAAC,IAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA,KAAAtB,UAAA;QACA,KAAAuB,OAAA,CAAAC,IAAA;MACA,GACAC,KAAA,CAAAC,KAAA;QACA,KAAA1B,UAAA;QACA,KAAAG,MAAA,QAAAwB,WAAA,CAAAD,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}