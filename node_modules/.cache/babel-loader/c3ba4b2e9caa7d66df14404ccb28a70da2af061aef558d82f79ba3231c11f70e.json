{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport SPagebar from '@/layout/SPagebar.vue';\nimport * as documentoService from '@/services/documento.service';\nexport default {\n  name: 'DocumentoList',\n  components: {\n    SPagebar\n  },\n  data: () => ({\n    breadcrumbs: [{\n      'text': 'Relatórios',\n      'to': '/relatorio',\n      'exact': true\n    }],\n    relatorio: {\n      tipo_relatorio: '',\n      categoria: '',\n      ponto_numero: ''\n    },\n    errors: {},\n    tiposRelatorio: [{\n      text: 'Auxiliar',\n      value: 'auxiliar',\n      categoria: ['turismo', 'escolar', 'taxi']\n    }, {\n      text: 'Acompanhante',\n      value: 'acompanhante',\n      categoria: ['escolar']\n    }, {\n      text: 'Condutor',\n      value: 'condutor',\n      categoria: ['fretamento']\n    }, {\n      text: 'Cooperado',\n      value: 'cooperado',\n      categoria: ['turismo']\n    }, {\n      text: 'Arrendador',\n      value: 'arrendador',\n      categoria: ['turismo', 'fretamento']\n    }, {\n      text: \"Idade Média\",\n      value: \"idade\"\n    }, {\n      text: \"Infrações\",\n      value: \"infracoes\"\n    }, {\n      text: \"Permissionários\",\n      value: \"permissionario\"\n    }, {\n      text: \"Pontos\",\n      value: \"pontos\",\n      categoria: ['taxi']\n    }],\n    tiposRelatorioFiltrados: [],\n    loading: false\n  }),\n  watch: {\n    'relatorio.categoria': {\n      handler: 'filtrarTiposRelatorio',\n      immediate: true\n    }\n  },\n  methods: {\n    salvar() {\n      this.loading = true;\n      let request = documentoService.carregarArquivo({\n        resource: this.$endpoints.RELATORIO,\n        data: this.relatorio\n      });\n      request.then(response => {\n        this.loading = false;\n        const downloadUrl = window.URL.createObjectURL(response.data);\n        window.open(downloadUrl, '__blank');\n      }).catch(error => {\n        this.handleBlobError(error);\n        this.loading = false;\n      });\n    },\n    filtrarTiposRelatorio() {\n      if (this.relatorio.categoria) {\n        this.tiposRelatorioFiltrados = this.tiposRelatorio.filter(tipo => {\n          return tipo.categoria.includes(this.relatorio.categoria);\n        });\n      } else {\n        this.tiposRelatorioFiltrados = [];\n      }\n    }\n  }\n};","map":{"version":3,"names":["SPagebar","documentoService","name","components","data","breadcrumbs","relatorio","tipo_relatorio","categoria","ponto_numero","errors","tiposRelatorio","text","value","tiposRelatorioFiltrados","loading","watch","handler","immediate","methods","salvar","request","carregarArquivo","resource","$endpoints","RELATORIO","then","response","downloadUrl","window","URL","createObjectURL","open","catch","error","handleBlobError","filtrarTiposRelatorio","filter","tipo","includes"],"sources":["src/views/relatorio/RelatorioList.vue"],"sourcesContent":["<template>\n  <v-container fluid>\n    <s-pagebar\n      page-title=\"Emitir Relatório\"\n      :breadcrumbs=\"breadcrumbs\"\n    />\n    <v-card flat>\n      <v-card-text>\n        <v-row dense>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-radio-group\n              v-model=\"relatorio.categoria\"\n              row\n              :error-messages=\"errors.categoria\"\n            >\n              <v-radio\n                label=\"Táxi\"\n                value=\"taxi\"\n              />\n              <v-radio\n                label=\"Escolar\"\n                value=\"escolar\"\n              />\n              <v-radio\n                label=\"Turismo\"\n                value=\"turismo\"\n              />\n              <v-radio\n                label=\"Fretamento\"\n                value=\"fretamento\"\n              />\n            </v-radio-group>\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-autocomplete\n              v-model=\"relatorio.tipo_relatorio\"\n              :items=\"tiposRelatorioFiltrados\"\n              label=\"Tipo de Relatório\"\n              :error-messages=\"errors.tipo_relatorio\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"relatorio.categoria === 'taxi'\"\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"relatorio.ponto_numero\"\n              label=\"Ponto\"\n              :error-messages=\"errors.ponto\"\n            />\n          </v-col>\n        </v-row>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer />\n        <v-btn\n          outlined\n          color=\"blue-grey darken-4\"\n          @click=\"$router.back()\"\n        >\n          Voltar\n        </v-btn>\n        <v-btn\n          color=\"blue-grey darken-4\"\n          dark\n          :loading=\"loading\"\n          @click=\"salvar\"\n        >\n          Gerar\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-container>\n</template>\n\n<script>\nimport SPagebar from '@/layout/SPagebar.vue'\nimport * as documentoService from '@/services/documento.service'\n\nexport default {\n  name: 'DocumentoList',\n  components: { SPagebar },\n  data: () => ({\n    breadcrumbs: [\n      {\n        'text': 'Relatórios',\n        'to': '/relatorio',\n        'exact': true\n      },\n    ],\n    relatorio: {\n      tipo_relatorio: '',\n      categoria: '',\n      ponto_numero: ''\n    },\n    errors: {},\n    tiposRelatorio: [\n      { text: 'Auxiliar', value: 'auxiliar', categoria: ['turismo', 'escolar', 'taxi'] },\n      { text: 'Acompanhante', value: 'acompanhante', categoria: ['escolar'] },\n      { text: 'Condutor', value: 'condutor', categoria: ['fretamento'] },\n      { text: 'Cooperado', value: 'cooperado', categoria: ['turismo'] },\n      { text: 'Arrendador', value: 'arrendador', categoria: ['turismo', 'fretamento'] },\n      { text: \"Idade Média\", value: \"idade\" },\n      { text: \"Infrações\", value: \"infracoes\" },\n      { text: \"Permissionários\", value: \"permissionario\" },\n      { text: \"Pontos\", value: \"pontos\", categoria: ['taxi'] },\n    ],\n    tiposRelatorioFiltrados: [],\n    loading: false,\n  }),\n  watch: {\n    'relatorio.categoria': {\n      handler: 'filtrarTiposRelatorio',\n      immediate: true\n    }\n  },\n  methods: {\n    salvar() {\n      this.loading = true\n      let request = documentoService.carregarArquivo({\n        resource: this.$endpoints.RELATORIO,\n        data: this.relatorio\n      })\n      request\n        .then(response => {\n          this.loading = false\n          const downloadUrl = window.URL.createObjectURL(response.data)\n          window.open(downloadUrl, '__blank')\n        })\n        .catch((error) => {\n          this.handleBlobError(error)\n          this.loading = false\n        });\n    },\n    filtrarTiposRelatorio() {\n      if (this.relatorio.categoria) {\n        this.tiposRelatorioFiltrados = this.tiposRelatorio.filter(tipo => {\n          return tipo.categoria.includes(this.relatorio.categoria);\n        });\n      } else {\n        this.tiposRelatorioFiltrados = [];\n      }\n    },\n  }\n}\n</script>\n"],"mappings":";;;AAmFA,OAAAA,QAAA;AACA,YAAAC,gBAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IAAAH;EAAA;EACAI,IAAA,EAAAA,CAAA;IACAC,WAAA,GACA;MACA;MACA;MACA;IACA,EACA;IACAC,SAAA;MACAC,cAAA;MACAC,SAAA;MACAC,YAAA;IACA;IACAC,MAAA;IACAC,cAAA,GACA;MAAAC,IAAA;MAAAC,KAAA;MAAAL,SAAA;IAAA,GACA;MAAAI,IAAA;MAAAC,KAAA;MAAAL,SAAA;IAAA,GACA;MAAAI,IAAA;MAAAC,KAAA;MAAAL,SAAA;IAAA,GACA;MAAAI,IAAA;MAAAC,KAAA;MAAAL,SAAA;IAAA,GACA;MAAAI,IAAA;MAAAC,KAAA;MAAAL,SAAA;IAAA,GACA;MAAAI,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;MAAAL,SAAA;IAAA,EACA;IACAM,uBAAA;IACAC,OAAA;EACA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,SAAA;IACA;EACA;EACAC,OAAA;IACAC,OAAA;MACA,KAAAL,OAAA;MACA,IAAAM,OAAA,GAAApB,gBAAA,CAAAqB,eAAA;QACAC,QAAA,OAAAC,UAAA,CAAAC,SAAA;QACArB,IAAA,OAAAE;MACA;MACAe,OAAA,CACAK,IAAA,CAAAC,QAAA;QACA,KAAAZ,OAAA;QACA,MAAAa,WAAA,GAAAC,MAAA,CAAAC,GAAA,CAAAC,eAAA,CAAAJ,QAAA,CAAAvB,IAAA;QACAyB,MAAA,CAAAG,IAAA,CAAAJ,WAAA;MACA,GACAK,KAAA,CAAAC,KAAA;QACA,KAAAC,eAAA,CAAAD,KAAA;QACA,KAAAnB,OAAA;MACA;IACA;IACAqB,sBAAA;MACA,SAAA9B,SAAA,CAAAE,SAAA;QACA,KAAAM,uBAAA,QAAAH,cAAA,CAAA0B,MAAA,CAAAC,IAAA;UACA,OAAAA,IAAA,CAAA9B,SAAA,CAAA+B,QAAA,MAAAjC,SAAA,CAAAE,SAAA;QACA;MACA;QACA,KAAAM,uBAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}