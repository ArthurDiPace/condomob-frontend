{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport ConfirmDialog from '@/components/ConfirmDialog.vue';\nimport * as documentoService from '@/services/documento.service';\nimport GenericMixin from '@/mixins/GenericMixin';\nimport SPagebar from '@/layout/SPagebar.vue';\nexport default {\n  name: \"ArquivoList\",\n  components: {\n    SPagebar,\n    ConfirmDialog\n  },\n  mixins: [GenericMixin],\n  props: {\n    permissao: Object,\n    disabledButtons: Boolean\n  },\n  data: () => ({\n    breadcrumbs: [{\n      'text': 'Lista de Arquivo',\n      'to': '/arquivo',\n      'exact': true\n    }],\n    headers: [{\n      text: \"Arquivo\",\n      value: \"id\"\n    }, {\n      text: \"Data do Carregamento\",\n      value: \"data_carregamento\"\n    }, {\n      text: \"Usuario\",\n      value: \"usuario\"\n    }, {\n      text: 'Ações',\n      value: 'action'\n    }],\n    totalItems: 0,\n    items: [],\n    options: {}\n  }),\n  watch: {\n    options: {\n      handler() {\n        this.getArquivos();\n      },\n      deep: true\n    }\n  },\n  methods: {\n    async getArquivos() {\n      const {\n        sortBy,\n        sortDesc,\n        page,\n        itemsPerPage\n      } = this.options;\n      const query = {\n        arquivo: this.arquivo,\n        page: page,\n        page_size: itemsPerPage,\n        ordering: `${sortDesc && sortDesc[0] ? \"-\" : \"\"}${sortBy}`\n      };\n      const response = await this.$api.list({\n        resource: this.$endpoints.ARQUIVO,\n        query: query\n      });\n      this.items = response.data.results;\n      this.totalItems = response.data.count;\n    },\n    cadastrarArquivo() {\n      this.$router.push('/arquivo/cadastrar');\n    },\n    GerarArquivo(arquivoId) {\n      let request = documentoService.carregarArquivo({\n        resource: `${this.$endpoints.ARQUIVO}/segunda_via/`,\n        data: {\n          id_arquivo: arquivoId\n        }\n      });\n      request.then(response => {\n        const downloadUrl = window.URL.createObjectURL(response.data);\n        window.open(downloadUrl, '__blank');\n      }).catch(error => {\n        this.handleBlobError(error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["ConfirmDialog","documentoService","GenericMixin","SPagebar","name","components","mixins","props","permissao","Object","disabledButtons","Boolean","data","breadcrumbs","headers","text","value","totalItems","items","options","watch","handler","getArquivos","deep","methods","sortBy","sortDesc","page","itemsPerPage","query","arquivo","page_size","ordering","response","$api","list","resource","$endpoints","ARQUIVO","results","count","cadastrarArquivo","$router","push","GerarArquivo","arquivoId","request","carregarArquivo","id_arquivo","then","downloadUrl","window","URL","createObjectURL","open","catch","error","handleBlobError"],"sources":["src/views/arquivo/ArquivoList.vue"],"sourcesContent":["<template>\n  <v-container fluid>\n    <s-pagebar\n      page-title=\"Arquivos\"\n      :breadcrumbs=\"breadcrumbs\"\n    >\n      <v-btn\n        color=\"blue-grey darken-4\"\n        dark\n        fab\n        small\n        @click=\"cadastrarArquivo\"\n      >\n        <v-icon>add</v-icon>\n      </v-btn>\n    </s-pagebar>    \n    <v-card flat>\n      <v-card-text>\n        <v-data-table \n          :headers=\"headers\"\n          :items=\"items\"\n          :options.sync=\"options\"\n          :server-items-length=\"totalItems\"\n          :items-per-page=\"10\"\n          :footer-props=\"{'items-per-page-options': [10, 20, 30]}\"\n        >\n          <template #[`item.data_carregamento`]=\"{ item }\">\n            <span v-if=\"!!item.data_carregamento\">{{ formatDateTimeToDate(item.data_carregamento) }}</span>\n          </template>\n          <template #[`item.action`]=\"{ item }\">\n            <v-toolbar-items>\n              <v-tooltip bottom>\n                <template #activator=\"{ on, attrs }\">\n                  <v-btn\n                    v-bind=\"attrs\"\n                    icon\n                    v-on=\"on\"\n                    @click=\"GerarArquivo(item.id)\"\n                  >\n                    <v-icon class=\"material-icons-outlined\">\n                      print\n                    </v-icon>\n                  </v-btn>\n                </template>\n                <span>Gerar Arquivo</span>\n              </v-tooltip>\n            </v-toolbar-items>\n          </template>\n        </v-data-table>\n      </v-card-text>\n    </v-card>\n    <ConfirmDialog ref=\"confirm\" />\n  </v-container>\n</template>\n\n<script>\nimport ConfirmDialog from '@/components/ConfirmDialog.vue'\nimport * as documentoService from '@/services/documento.service'\nimport GenericMixin from '@/mixins/GenericMixin'\nimport SPagebar from '@/layout/SPagebar.vue'\n\nexport default {\n    name: \"ArquivoList\",\n    components: { SPagebar, ConfirmDialog },\n    mixins: [GenericMixin],\n    props: {\n        permissao: Object,\n        disabledButtons: Boolean\n    },\n    data: () => ({\n      breadcrumbs: [\n            {\n            'text': 'Lista de Arquivo',\n            'to': '/arquivo',\n            'exact': true\n            },\n        ],\n        headers: [\n            { text: \"Arquivo\", value: \"id\" },\n            { text: \"Data do Carregamento\", value: \"data_carregamento\" },\n            { text: \"Usuario\", value: \"usuario\" },\n            {text: 'Ações', value: 'action'},\n        ],\n        totalItems: 0,\n        items: [],\n        options: {},\n    }),\n    watch: {\n        options: {\n            handler() {\n                this.getArquivos();\n            },\n            deep: true\n        },\n    },\n    methods: {\n      async getArquivos() { \n        const { sortBy, sortDesc, page, itemsPerPage } = this.options   \n\n        const query = {\n          arquivo: this.arquivo,\n          page: page,\n          page_size: itemsPerPage,\n          ordering: `${sortDesc && sortDesc[0] ? \"-\" : \"\"}${sortBy}`\n        }\n        const response = await this.$api.list({\n            resource: this.$endpoints.ARQUIVO,\n            query: query\n        });\n        this.items = response.data.results;\n        this.totalItems = response.data.count;\n      },\n      cadastrarArquivo() {\n        this.$router.push('/arquivo/cadastrar')\n      },\n      GerarArquivo(arquivoId) {\n        let request = documentoService.carregarArquivo({\n          resource: `${this.$endpoints.ARQUIVO}/segunda_via/`,\n          data: {\n            id_arquivo: arquivoId\n          }\n        })\n        request\n          .then(response => {\n            const downloadUrl = window.URL.createObjectURL(response.data)\n            window.open(downloadUrl, '__blank')\n          })\n          .catch((error) => {\n            this.handleBlobError(error)\n          });\n      },\n    }\n}\n</script>"],"mappings":";;;;AAwDA,OAAAA,aAAA;AACA,YAAAC,gBAAA;AACA,OAAAC,YAAA;AACA,OAAAC,QAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IAAAF,QAAA;IAAAH;EAAA;EACAM,MAAA,GAAAJ,YAAA;EACAK,KAAA;IACAC,SAAA,EAAAC,MAAA;IACAC,eAAA,EAAAC;EACA;EACAC,IAAA,EAAAA,CAAA;IACAC,WAAA,GACA;MACA;MACA;MACA;IACA,EACA;IACAC,OAAA,GACA;MAAAC,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,EACA;IACAC,UAAA;IACAC,KAAA;IACAC,OAAA;EACA;EACAC,KAAA;IACAD,OAAA;MACAE,QAAA;QACA,KAAAC,WAAA;MACA;MACAC,IAAA;IACA;EACA;EACAC,OAAA;IACA,MAAAF,YAAA;MACA;QAAAG,MAAA;QAAAC,QAAA;QAAAC,IAAA;QAAAC;MAAA,SAAAT,OAAA;MAEA,MAAAU,KAAA;QACAC,OAAA,OAAAA,OAAA;QACAH,IAAA,EAAAA,IAAA;QACAI,SAAA,EAAAH,YAAA;QACAI,QAAA,KAAAN,QAAA,IAAAA,QAAA,iBAAAD,MAAA;MACA;MACA,MAAAQ,QAAA,cAAAC,IAAA,CAAAC,IAAA;QACAC,QAAA,OAAAC,UAAA,CAAAC,OAAA;QACAT,KAAA,EAAAA;MACA;MACA,KAAAX,KAAA,GAAAe,QAAA,CAAArB,IAAA,CAAA2B,OAAA;MACA,KAAAtB,UAAA,GAAAgB,QAAA,CAAArB,IAAA,CAAA4B,KAAA;IACA;IACAC,iBAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;IACAC,aAAAC,SAAA;MACA,IAAAC,OAAA,GAAA7C,gBAAA,CAAA8C,eAAA;QACAX,QAAA,UAAAC,UAAA,CAAAC,OAAA;QACA1B,IAAA;UACAoC,UAAA,EAAAH;QACA;MACA;MACAC,OAAA,CACAG,IAAA,CAAAhB,QAAA;QACA,MAAAiB,WAAA,GAAAC,MAAA,CAAAC,GAAA,CAAAC,eAAA,CAAApB,QAAA,CAAArB,IAAA;QACAuC,MAAA,CAAAG,IAAA,CAAAJ,WAAA;MACA,GACAK,KAAA,CAAAC,KAAA;QACA,KAAAC,eAAA,CAAAD,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}