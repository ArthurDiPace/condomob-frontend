{"ast":null,"code":"import SPagebar from '@/layout/SPagebar.vue';\nimport * as ViaCepService from '@/services/cep.service';\nimport PromptDialog from '@/components/PromptDialog.vue';\nexport default {\n  name: 'PessoaCreate',\n  components: {\n    SPagebar,\n    PromptDialog\n  },\n  data: () => ({\n    breadcrumbs: [{\n      'text': 'Permissões',\n      'to': '/permissao',\n      'exact': true\n    }, {\n      'text': 'Detalhes',\n      'disabled': true\n    }, {\n      'text': 'Editar pessoa',\n      'disabled': true\n    }],\n    funcoes: [{\n      text: 'Permissionário',\n      value: 'permissionario'\n    }, {\n      text: 'Auxiliar',\n      value: 'auxiliar'\n    }, {\n      text: 'Acompanhante',\n      value: 'acompanhante'\n    }, {\n      text: 'Cooperado',\n      value: 'cooperado'\n    }, {\n      text: 'Condutor',\n      value: 'condutor'\n    }, {\n      text: 'Arrendador',\n      value: 'arrendador'\n    }],\n    pessoa: {},\n    errors: {},\n    pontos: [],\n    categoria: '',\n    disabledEndereco: true\n  }),\n  created() {\n    this.getPessoa(this.$route.params.id);\n    this.getPontos();\n  },\n  methods: {\n    async getPessoa(id) {\n      const response = await this.$api.get({\n        resource: this.$endpoints.PESSOA,\n        id: id\n      });\n      this.pessoa = response.data;\n      this.getPermissao(this.pessoa.permissao);\n    },\n    async getPontos() {\n      const response = await this.$api.list({\n        resource: this.$endpoints.PONTO\n      });\n      this.pontos = response.data.results;\n    },\n    async getPermissao(id) {\n      const response = await this.$api.get({\n        resource: this.$endpoints.PERMISSAO,\n        id: id\n      });\n      this.categoria = response.data.categoria;\n    },\n    async converterCadastro() {\n      const res = await this.$refs.prompt.open('Requerimento', 'Informe o número do requerimento', 'Número do requerimento');\n      if (res) {\n        this.pessoa.numero_requerimento = res;\n        this.pessoa.pre_cadastro = false;\n        const response = this.$api.update({\n          resource: this.$endpoints.PESSOA,\n          id: this.pessoa.id,\n          data: this.pessoa\n        });\n        response.then(() => {\n          this.$toast.open({\n            message: 'Registro salvo com sucesso',\n            type: 'success'\n          });\n          this.$router.back();\n        }).catch(error => {\n          this.errors = this.handleError(error);\n        });\n      }\n    },\n    async salvar() {\n      const res = await this.$refs.prompt.open('Requerimento', 'Informe o número do requerimento', 'Número do requerimento');\n      if (res) {\n        this.pessoa.numero_requerimento = res;\n        const response = this.$api.update({\n          resource: this.$endpoints.PESSOA,\n          id: this.pessoa.id,\n          data: this.pessoa\n        });\n        response.then(() => {\n          this.$toast.open({\n            message: 'Registro salvo com sucesso',\n            type: 'success'\n          });\n          this.$router.back();\n        }).catch(error => {\n          this.errors = this.handleError(error);\n        });\n      }\n    },\n    consultarCep(cep) {\n      if (cep && cep.length == 8) {\n        this.disabledEndereco = true;\n        ViaCepService.buscarEndereco(cep).then(response => {\n          Object.assign(this.pessoa, {\n            endereco: response.data.logradouro,\n            complemento: response.data.complemento,\n            bairro: response.data.bairro,\n            municipio: response.data.localidade,\n            uf: response.data.uf\n          });\n        });\n      }\n      if (cep == '58000000') {\n        this.disabledEndereco = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["SPagebar","ViaCepService","PromptDialog","name","components","data","breadcrumbs","funcoes","text","value","pessoa","errors","pontos","categoria","disabledEndereco","created","getPessoa","$route","params","id","getPontos","methods","response","$api","get","resource","$endpoints","PESSOA","getPermissao","permissao","list","PONTO","results","PERMISSAO","converterCadastro","res","$refs","prompt","open","numero_requerimento","pre_cadastro","update","then","$toast","message","type","$router","back","catch","error","handleError","salvar","consultarCep","cep","length","buscarEndereco","Object","assign","endereco","logradouro","complemento","bairro","municipio","localidade","uf"],"sources":["src/views/pessoa/PessoaPrecadastroEdit.vue"],"sourcesContent":["<template>\n  <v-container fluid>\n    <s-pagebar\n      page-title=\"Pré-cadastro - Editar pessoa\"\n      :breadcrumbs=\"breadcrumbs\"\n    >\n      <v-menu offset-y>\n        <template #activator=\"{ on, attrs }\">\n          <v-btn\n            color=\"blue-grey darken-4\"\n            dark\n            fab\n            small\n            v-bind=\"attrs\"\n            v-on=\"on\"\n          >\n            <v-icon>more_vert</v-icon>\n          </v-btn>\n        </template>\n        <v-list>\n          <v-list-item\n            link\n            @click=\"converterCadastro\"\n          >\n            <v-list-item-title>Efetivar Cadastro</v-list-item-title>\n          </v-list-item>\n        </v-list>\n      </v-menu>\n    </s-pagebar>\n    <v-card flat>\n      <v-card-text>\n        <v-row dense>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-radio-group\n              v-model=\"pessoa.tipo\"\n              row\n            >\n              <v-radio\n                label=\"Pessoa Física\"\n                value=\"fisica\"\n              />\n              <v-radio\n                label=\"Pessoa Jurídica\"\n                value=\"juridica\"\n              />\n            </v-radio-group>\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"3\"\n            sm=\"12\"\n          >\n            <v-autocomplete\n              v-model=\"pessoa.funcao\"\n              :items=\"funcoes\"\n              label=\"Função\"\n              :error-messages=\"errors.funcao\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"3\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.numero_documento\"\n              :label=\"pessoa.tipo=='fisica' ? 'CPF' : 'CNPJ'\"\n              :error-messages=\"errors.numero_documento\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"6\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.nome\"\n              label=\"Nome\"\n              :error-messages=\"errors.nome\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"pessoa.tipo=='fisica'\"\n            cols=\"12\"\n            md=\"3\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.data_nascimento\"\n              label=\"Data de Nascimento\"\n              :error-messages=\"errors.data_nascimento\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"pessoa.tipo=='fisica'\"\n            cols=\"12\"\n            md=\"3\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.cnh\"\n              label=\"CNH\"\n              :error-messages=\"errors.cnh\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"pessoa.tipo=='fisica'\"\n            cols=\"12\"\n            md=\"3\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.cnh_categoria\"\n              label=\"Categoria CNH\"\n              :error-messages=\"errors.cnh_categoria\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"pessoa.tipo=='fisica'\"\n            cols=\"12\"\n            md=\"3\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.cnh_validade\"\n              label=\"Validade CNH\"\n              :error-messages=\"errors.cnh_validade\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"2\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.cep\"\n              v-mask=\"['########']\"\n              label=\"CEP\"\n              :error-messages=\"errors.cep\"\n              @input=\"consultarCep\"\n            />\n            <a\n              href=\"https://buscacepinter.correios.com.br/app/endereco/index.php\"\n              target=\"_blank\"\n            >Clique se não localizar o CEP</a>\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"6\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.endereco\"\n              label=\"Endereço\"\n              :error-messages=\"errors.endereco\"\n              :readonly=\"disabledEndereco\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"2\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.numero\"\n              label=\"Número\"\n              :error-messages=\"errors.numero\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"2\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.complemento\"\n              label=\"Complemento\"\n              :error-messages=\"errors.complemento\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"3\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.bairro\"\n              label=\"Bairro\"\n              :error-messages=\"errors.bairro\"\n              :readonly=\"disabledEndereco\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"3\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.municipio\"\n              label=\"Município\"\n              :error-messages=\"errors.municipio\"\n              :readonly=\"disabledEndereco\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"3\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.uf\"\n              label=\"UF\"\n              :error-messages=\"errors.uf\"\n              :readonly=\"disabledEndereco\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"3\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.telefone\"\n              v-mask=\"['(##) ####-####', '(##) #####-####']\"\n              label=\"Telefone\"\n              :error-messages=\"errors.telefone\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"categoria=='turismo'\"\n            cols=\"12\"\n            md=\"6\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.inscricao_municipal\"\n              label=\"Inscrição Municipal\"\n              :error-messages=\"errors.inscricao_municipal\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"categoria=='turismo'\"\n            cols=\"12\"\n            md=\"6\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.registro_ministerio_turismo\"\n              label=\"Registro Ministério de Turismo\"\n              :error-messages=\"errors.registro_ministerio_turismo\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"pessoa.funcao=='permissionario' && categoria=='taxi'\"\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-autocomplete\n              v-model=\"pessoa.ponto\"\n              :items=\"pontos\"\n              label=\"Ponto\"\n              item-text=\"endereco\"\n              item-value=\"id\"\n              :error-messages=\"errors.ponto\"\n            >\n              <template #item=\"{ item }\">\n                {{ item.numero }} - {{ item.endereco }}\n              </template>\n              <template #selection=\"{ item }\">\n                {{ item.numero }} - {{ item.endereco }}\n              </template>\n            </v-autocomplete>\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-textarea\n              v-model=\"pessoa.observacao\"\n              label=\"Observações\"\n              filled\n              :error-messages=\"errors.observacao\"\n            />\n          </v-col>\n        </v-row>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer />\n        <v-btn\n          outlined\n          color=\"blue-grey darken-4\"\n          @click=\"$router.back()\"\n        >\n          Voltar\n        </v-btn>\n        <v-btn\n          color=\"blue-grey darken-4\"\n          dark\n          @click=\"salvar\"\n        >\n          Salvar\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n    <prompt-dialog ref=\"prompt\" />\n  </v-container>\n</template>\n\n<script>\nimport SPagebar from '@/layout/SPagebar.vue'\nimport * as ViaCepService from '@/services/cep.service'\nimport PromptDialog from '@/components/PromptDialog.vue'\n\nexport default {\n  name: 'PessoaCreate',\n  components: { SPagebar, PromptDialog },\n  data: () => ({\n    breadcrumbs: [\n      {\n        'text': 'Permissões',\n        'to': '/permissao',\n        'exact': true\n      },\n      {\n        'text': 'Detalhes',\n        'disabled': true\n      },\n      {\n        'text': 'Editar pessoa',\n        'disabled': true\n      }\n    ],\n    funcoes: [\n      {text: 'Permissionário', value: 'permissionario'},\n      {text: 'Auxiliar', value: 'auxiliar'},\n      {text: 'Acompanhante', value: 'acompanhante'},\n      {text: 'Cooperado', value: 'cooperado'},\n      {text: 'Condutor', value: 'condutor'},\n      {text: 'Arrendador', value: 'arrendador'},\n    ],\n    pessoa: {},\n    errors: {},\n    pontos: [],\n    categoria: '',\n    disabledEndereco: true,\n  }),\n  created() {\n    this.getPessoa(this.$route.params.id)\n    this.getPontos()\n  },\n  methods: {\n    async getPessoa(id) {\n      const response = await this.$api.get({\n        resource: this.$endpoints.PESSOA,\n        id: id\n      })\n      this.pessoa = response.data\n      this.getPermissao(this.pessoa.permissao)\n    },\n    async getPontos() {\n      const response = await this.$api.list({\n        resource: this.$endpoints.PONTO\n      })\n      this.pontos = response.data.results\n    },\n    async getPermissao(id) {\n      const response = await this.$api.get({\n        resource: this.$endpoints.PERMISSAO,\n        id: id\n      })\n      this.categoria = response.data.categoria\n    },\n    async converterCadastro() {\n      const res = await this.$refs.prompt.open(\n        'Requerimento',\n        'Informe o número do requerimento',\n        'Número do requerimento'\n      )\n      if (res) {\n        this.pessoa.numero_requerimento = res\n        this.pessoa.pre_cadastro = false\n        const response = this.$api.update({\n          resource: this.$endpoints.PESSOA,\n          id: this.pessoa.id,\n          data: this.pessoa\n        })\n        response\n          .then(()=>{\n            this.$toast.open({\n                message: 'Registro salvo com sucesso',\n                type: 'success',\n            })\n            this.$router.back()\n          })\n          .catch(error=>{\n            this.errors = this.handleError(error)\n          })\n      }\n    },\n    async salvar() {\n      const res = await this.$refs.prompt.open(\n        'Requerimento',\n        'Informe o número do requerimento',\n        'Número do requerimento'\n      )\n      if (res) {\n        this.pessoa.numero_requerimento = res\n        const response = this.$api.update({\n          resource: this.$endpoints.PESSOA,\n          id: this.pessoa.id,\n          data: this.pessoa\n        })\n        response\n          .then(()=>{\n            this.$toast.open({\n                message: 'Registro salvo com sucesso',\n                type: 'success',\n            })\n            this.$router.back()\n          })\n          .catch(error=>{\n            this.errors = this.handleError(error)\n          })\n      }\n    },\n    consultarCep(cep) {\n      if(cep && cep.length == 8) {\n        this.disabledEndereco = true\n        ViaCepService.buscarEndereco(cep).then(response => {\n          Object.assign(this.pessoa, {\n            endereco: response.data.logradouro,\n            complemento: response.data.complemento,\n            bairro: response.data.bairro,\n            municipio: response.data.localidade,\n            uf: response.data.uf\n          })\n        })\n      }\n      if(cep == '58000000') {\n        this.disabledEndereco = false\n      }\n    }\n  }\n}\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}