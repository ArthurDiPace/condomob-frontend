{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport SPagebar from '@/layout/SPagebar.vue';\nimport * as documentoService from '@/services/documento.service';\nexport default {\n  name: 'DocumentoList',\n  components: {\n    SPagebar\n  },\n  data() {\n    return {\n      breadcrumbs: [{\n        text: 'Relatórios',\n        to: '/relatorio',\n        exact: true\n      }],\n      relatorio: {\n        tipo_relatorio: '',\n        categoria: '',\n        ponto_numero: ''\n      },\n      errors: {},\n      tiposRelatorio: [{\n        text: 'Auxiliar',\n        value: 'auxiliar',\n        categorias: ['turismo', 'escolar', 'taxi']\n      }, {\n        text: 'Acompanhante',\n        value: 'acompanhante',\n        categorias: ['escolar']\n      }, {\n        text: 'Condutor',\n        value: 'condutor',\n        categorias: ['fretamento']\n      }, {\n        text: 'Cooperado',\n        value: 'cooperado',\n        categorias: ['turismo']\n      }, {\n        text: 'Arrendador',\n        value: 'arrendador',\n        categorias: ['turismo', 'fretamento']\n      }, {\n        text: \"Idade Média\",\n        value: \"idade\"\n      }, {\n        text: \"Infrações\",\n        value: \"infracoes\"\n      }, {\n        text: \"Permissionários\",\n        value: \"permissionario\"\n      }, {\n        text: \"Pontos\",\n        value: \"pontos\",\n        categorias: ['taxi']\n      }],\n      loading: false\n    };\n  },\n  methods: {\n    salvar() {\n      this.loading = true;\n      let request = documentoService.carregarArquivo({\n        resource: this.$endpoints.RELATORIO,\n        data: this.relatorio\n      });\n      request.then(response => {\n        this.loading = false;\n        const downloadUrl = window.URL.createObjectURL(response.data);\n        window.open(downloadUrl, '__blank');\n      }).catch(error => {\n        this.handleBlobError(error);\n        this.loading = false;\n      });\n    }\n  },\n  computed: {\n    tiposRelatorioFiltrados() {\n      if (!this.relatorio.categoria) return [];\n      return this.tiposRelatorio.filter(tipo => {\n        return !tipo.categorias || tipo.categorias.includes(this.relatorio.categoria);\n      });\n    }\n  }\n};","map":{"version":3,"names":["SPagebar","documentoService","name","components","data","breadcrumbs","text","to","exact","relatorio","tipo_relatorio","categoria","ponto_numero","errors","tiposRelatorio","value","categorias","loading","methods","salvar","request","carregarArquivo","resource","$endpoints","RELATORIO","then","response","downloadUrl","window","URL","createObjectURL","open","catch","error","handleBlobError","computed","tiposRelatorioFiltrados","filter","tipo","includes"],"sources":["src/views/relatorio/RelatorioList.vue"],"sourcesContent":["<template>\n  <v-container fluid>\n    <s-pagebar\n      page-title=\"Emitir Relatório\"\n      :breadcrumbs=\"breadcrumbs\"\n    />\n    <v-card flat>\n      <v-card-text>\n        <v-row dense>\n          <v-col cols=\"12\" sm=\"12\">\n            <v-radio-group\n              v-model=\"relatorio.categoria\"\n              row\n              :error-messages=\"errors.categoria\"\n            >\n              <v-radio label=\"Táxi\" value=\"taxi\" />\n              <v-radio label=\"Escolar\" value=\"escolar\" />\n              <v-radio label=\"Turismo\" value=\"turismo\" />\n              <v-radio label=\"Fretamento\" value=\"fretamento\" />\n            </v-radio-group>\n          </v-col>\n          <v-col cols=\"12\" sm=\"12\">\n            <v-autocomplete\n              v-model=\"relatorio.tipo_relatorio\"\n              :items=\"tiposRelatorioFiltrados\"\n              label=\"Tipo de Relatório\"\n              :error-messages=\"errors.tipo_relatorio\"\n            />\n          </v-col>\n          <v-col v-if=\"relatorio.categoria === 'taxi'\" cols=\"12\" sm=\"12\">\n            <v-text-field\n              v-model=\"relatorio.ponto_numero\"\n              label=\"Ponto\"\n              :error-messages=\"errors.ponto\"\n            />\n          </v-col>\n        </v-row>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer />\n        <v-btn\n          outlined\n          color=\"blue-grey darken-4\"\n          @click=\"$router.back()\"\n        >\n          Voltar\n        </v-btn>\n        <v-btn\n          color=\"blue-grey darken-4\"\n          dark\n          :loading=\"loading\"\n          @click=\"salvar\"\n        >\n          Gerar\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-container>\n</template>\n\n<script>\nimport SPagebar from '@/layout/SPagebar.vue'\nimport * as documentoService from '@/services/documento.service'\n\nexport default {\n  name: 'DocumentoList',\n  components: { SPagebar },\n  data() {\n    return {\n      breadcrumbs: [\n        {\n          text: 'Relatórios',\n          to: '/relatorio',\n          exact: true\n        }\n      ],\n      relatorio: {\n        tipo_relatorio: '',\n        categoria: '',\n        ponto_numero: ''\n      },\n      errors: {},\n      tiposRelatorio: [\n        { text: 'Auxiliar', value: 'auxiliar', categorias: ['turismo', 'escolar', 'taxi'] },\n        { text: 'Acompanhante', value: 'acompanhante', categorias: ['escolar'] },\n        { text: 'Condutor', value: 'condutor', categorias: ['fretamento'] },\n        { text: 'Cooperado', value: 'cooperado', categorias: ['turismo'] },\n        { text: 'Arrendador', value: 'arrendador', categorias: ['turismo', 'fretamento'] },\n        { text: \"Idade Média\", value: \"idade\" },\n        { text: \"Infrações\", value: \"infracoes\" },\n        { text: \"Permissionários\", value: \"permissionario\" },\n        { text: \"Pontos\", value: \"pontos\", categorias: ['taxi'] },\n      ],\n      loading: false,\n    };\n  },\n  methods: {\n    salvar() {\n      this.loading = true\n      let request = documentoService.carregarArquivo({\n        resource: this.$endpoints.RELATORIO,\n        data: this.relatorio\n      })\n      request\n        .then(response => {\n          this.loading = false\n          const downloadUrl = window.URL.createObjectURL(response.data)\n          window.open(downloadUrl, '__blank')\n        })\n        .catch((error) => {\n          this.handleBlobError(error)\n          this.loading = false\n        });\n    },\n  },\n  computed: {\n    tiposRelatorioFiltrados() {\n      if (!this.relatorio.categoria) return [];\n\n      return this.tiposRelatorio.filter(tipo => {\n        return !tipo.categorias || tipo.categorias.includes(this.relatorio.categoria);\n      });\n    }\n  }\n}\n</script>\n"],"mappings":";;;AA6DA,OAAAA,QAAA;AACA,YAAAC,gBAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IAAAH;EAAA;EACAI,KAAA;IACA;MACAC,WAAA,GACA;QACAC,IAAA;QACAC,EAAA;QACAC,KAAA;MACA,EACA;MACAC,SAAA;QACAC,cAAA;QACAC,SAAA;QACAC,YAAA;MACA;MACAC,MAAA;MACAC,cAAA,GACA;QAAAR,IAAA;QAAAS,KAAA;QAAAC,UAAA;MAAA,GACA;QAAAV,IAAA;QAAAS,KAAA;QAAAC,UAAA;MAAA,GACA;QAAAV,IAAA;QAAAS,KAAA;QAAAC,UAAA;MAAA,GACA;QAAAV,IAAA;QAAAS,KAAA;QAAAC,UAAA;MAAA,GACA;QAAAV,IAAA;QAAAS,KAAA;QAAAC,UAAA;MAAA,GACA;QAAAV,IAAA;QAAAS,KAAA;MAAA,GACA;QAAAT,IAAA;QAAAS,KAAA;MAAA,GACA;QAAAT,IAAA;QAAAS,KAAA;MAAA,GACA;QAAAT,IAAA;QAAAS,KAAA;QAAAC,UAAA;MAAA,EACA;MACAC,OAAA;IACA;EACA;EACAC,OAAA;IACAC,OAAA;MACA,KAAAF,OAAA;MACA,IAAAG,OAAA,GAAAnB,gBAAA,CAAAoB,eAAA;QACAC,QAAA,OAAAC,UAAA,CAAAC,SAAA;QACApB,IAAA,OAAAK;MACA;MACAW,OAAA,CACAK,IAAA,CAAAC,QAAA;QACA,KAAAT,OAAA;QACA,MAAAU,WAAA,GAAAC,MAAA,CAAAC,GAAA,CAAAC,eAAA,CAAAJ,QAAA,CAAAtB,IAAA;QACAwB,MAAA,CAAAG,IAAA,CAAAJ,WAAA;MACA,GACAK,KAAA,CAAAC,KAAA;QACA,KAAAC,eAAA,CAAAD,KAAA;QACA,KAAAhB,OAAA;MACA;IACA;EACA;EACAkB,QAAA;IACAC,wBAAA;MACA,UAAA3B,SAAA,CAAAE,SAAA;MAEA,YAAAG,cAAA,CAAAuB,MAAA,CAAAC,IAAA;QACA,QAAAA,IAAA,CAAAtB,UAAA,IAAAsB,IAAA,CAAAtB,UAAA,CAAAuB,QAAA,MAAA9B,SAAA,CAAAE,SAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}