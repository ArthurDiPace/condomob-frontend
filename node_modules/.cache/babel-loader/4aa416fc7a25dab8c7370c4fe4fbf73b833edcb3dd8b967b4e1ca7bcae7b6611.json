{"ast":null,"code":"import moment from 'moment';\nimport SPagebar from '@/layout/SPagebar.vue';\nimport * as SemobService from '@/services/semob.service';\nimport * as ViaCepService from '@/services/cep.service';\nimport PromptDialog from '@/components/PromptDialog.vue';\nexport default {\n  name: 'PessoaConsulta',\n  components: {\n    SPagebar,\n    PromptDialog\n  },\n  data: () => ({\n    carregando: false,\n    carregandoCondutor: false,\n    breadcrumbs: [{\n      'text': 'Consultar pessoa',\n      'disabled': true\n    }],\n    pessoa: {\n      tipo: 'fisica',\n      nome: '',\n      cnh: '',\n      cnh_categoria: '',\n      cnh_validade: null,\n      endereco: '',\n      complemento: '',\n      bairro: '',\n      municipio: '',\n      uf: ''\n    },\n    errors: {},\n    categoria: '',\n    disabledEndereco: true\n  }),\n  methods: {\n    consultarCondutor(cpf) {\n      if (cpf && cpf.length == 11 && this.pessoa.tipo == 'fisica') {\n        this.carregandoCondutor = true;\n        SemobService.buscarCondutor(cpf).then(response => {\n          Object.assign(this.pessoa, {\n            nome: response.data.nome_condutor,\n            cnh: response.data.num_registro,\n            cnh_categoria: response.data.cod_categoria,\n            cnh_validade: moment(response.data.data_validade, \"DDMMYYYY\").format('DD/MM/YYYY'),\n            data_nascimento: moment(response.data.data_nascimento, \"DDMMYYYY\").format('DD/MM/YYYY')\n          });\n        });\n        this.carregandoCondutor = false;\n      }\n    },\n    consultarCep(cep) {\n      if (cep && cep.length == 8) {\n        this.carregando = true;\n        this.disabledEndereco = true;\n        ViaCepService.buscarEndereco(cep).then(response => {\n          Object.assign(this.pessoa, {\n            endereco: response.data.logradouro,\n            complemento: response.data.complemento,\n            bairro: response.data.bairro,\n            municipio: response.data.localidade,\n            uf: response.data.uf\n          });\n          this.carregando = false;\n        });\n      }\n      if (cep == '58000000') {\n        this.disabledEndereco = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["moment","SPagebar","SemobService","ViaCepService","PromptDialog","name","components","data","carregando","carregandoCondutor","breadcrumbs","pessoa","tipo","nome","cnh","cnh_categoria","cnh_validade","endereco","complemento","bairro","municipio","uf","errors","categoria","disabledEndereco","methods","consultarCondutor","cpf","length","buscarCondutor","then","response","Object","assign","nome_condutor","num_registro","cod_categoria","data_validade","format","data_nascimento","consultarCep","cep","buscarEndereco","logradouro","localidade"],"sources":["src/views/consulta/ConsultaPessoa.vue"],"sourcesContent":["<template>\n  <v-container fluid>\n    <s-pagebar\n      page-title=\"Consultar pessoa\"\n      :breadcrumbs=\"breadcrumbs\"\n    />\n    <v-card flat>\n      <v-card-text>\n        <v-row dense>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-radio-group\n              v-model=\"pessoa.tipo\"\n              row\n              class=\"required\"\n            >\n              <v-radio\n                label=\"Pessoa Física\"\n                value=\"fisica\"\n              />\n              <v-radio\n                label=\"Pessoa Jurídica\"\n                value=\"juridica\"\n              />\n            </v-radio-group>\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"3\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.numero_documento\"\n              :label=\"pessoa.tipo=='fisica' ? 'CPF' : 'CNPJ'\"\n              class=\"required\"\n              :error-messages=\"errors.numero_documento\"\n              @input=\"consultarCondutor\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"6\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.nome\"\n              label=\"Nome\"\n              class=\"required\"\n              :error-messages=\"errors.nome\"\n              :loading=\"carregandoCondutor\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"pessoa.tipo=='fisica'\"\n            cols=\"12\"\n            md=\"3\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.data_nascimento\"\n              label=\"Data de Nascimento\"\n              class=\"required\"\n              :error-messages=\"errors.data_nascimento\"\n              :loading=\"carregandoCondutor\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"pessoa.tipo=='fisica'\"\n            cols=\"12\"\n            md=\"3\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.cnh\"\n              label=\"CNH\"\n              :error-messages=\"errors.cnh\"\n              :loading=\"carregandoCondutor\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"pessoa.tipo=='fisica'\"\n            cols=\"12\"\n            md=\"3\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.cnh_categoria\"\n              label=\"Categoria CNH\"\n              :error-messages=\"errors.cnh_categoria\"\n              :loading=\"carregandoCondutor\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"pessoa.tipo=='fisica'\"\n            cols=\"12\"\n            md=\"3\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.cnh_validade\"\n              label=\"Validade CNH\"\n              :error-messages=\"errors.cnh_validade\"\n              :loading=\"carregandoCondutor\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"4\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.cep\"\n              v-mask=\"['########']\"\n              label=\"CEP\"\n              class=\"required\"\n              :error-messages=\"errors.cep\"\n              @input=\"consultarCep\"\n            />\n            <a\n              href=\"https://buscacepinter.correios.com.br/app/endereco/index.php\"\n              target=\"_blank\"\n            >Clique se não localizar o CEP</a>\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"6\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.endereco\"\n              label=\"Endereço\"\n              class=\"required\"\n              :error-messages=\"errors.endereco\"\n              :readonly=\"disabledEndereco\"\n              :loading=\"carregando\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"2\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.numero\"\n              label=\"Número\"\n              class=\"required\"\n              :error-messages=\"errors.numero\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"2\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.complemento\"\n              label=\"Complemento\"\n              :error-messages=\"errors.complemento\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"3\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.bairro\"\n              label=\"Bairro\"\n              class=\"required\"\n              :error-messages=\"errors.bairro\"\n              :readonly=\"disabledEndereco\"\n              :loading=\"carregando\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"3\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.municipio\"\n              label=\"Município\"\n              class=\"required\"\n              :error-messages=\"errors.municipio\"\n              :readonly=\"disabledEndereco\"\n              :loading=\"carregando\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"3\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.uf\"\n              label=\"UF\"\n              class=\"required\"\n              :error-messages=\"errors.uf\"\n              :readonly=\"disabledEndereco\"\n              :loading=\"carregando\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"3\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"pessoa.telefone\"\n              v-mask=\"['(##) ####-####', '(##) #####-####']\"\n              label=\"Telefone\"\n              class=\"required\"\n              :error-messages=\"errors.telefone\"\n            />\n          </v-col>\n        </v-row>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer />\n        <v-btn\n          outlined\n          color=\"blue-grey darken-4\"\n          @click=\"$router.back()\"\n        >\n          Voltar\n        </v-btn>\n      </v-card-actions>\n      <prompt-dialog ref=\"prompt\" />\n    </v-card>\n  </v-container>\n</template>\n\n<script>\nimport moment from 'moment'\nimport SPagebar from '@/layout/SPagebar.vue'\nimport * as SemobService from '@/services/semob.service'\nimport * as ViaCepService from '@/services/cep.service'\nimport PromptDialog from '@/components/PromptDialog.vue'\n\nexport default {\n  name: 'PessoaConsulta',\n  components: { SPagebar, PromptDialog },\n  data: () => ({\n    carregando: false,\n    carregandoCondutor: false,\n    breadcrumbs: [\n      {\n        'text': 'Consultar pessoa',\n        'disabled': true\n      }\n    ],\n    pessoa: {\n      tipo: 'fisica',\n      nome: '',\n      cnh: '',\n      cnh_categoria: '',\n      cnh_validade: null,\n      endereco: '',\n      complemento: '',\n      bairro: '',\n      municipio: '',\n      uf: '',\n    },\n    errors: {},\n    categoria: '',\n    disabledEndereco: true,\n  }),\n  methods: {\n    consultarCondutor(cpf) {\n      if(cpf && cpf.length == 11 && this.pessoa.tipo == 'fisica') {\n        this.carregandoCondutor = true\n        SemobService.buscarCondutor(cpf).then(response => {\n          Object.assign(this.pessoa, {\n            nome: response.data.nome_condutor,\n            cnh: response.data.num_registro,\n            cnh_categoria: response.data.cod_categoria,\n            cnh_validade: moment(response.data.data_validade, \"DDMMYYYY\").format('DD/MM/YYYY'),\n            data_nascimento: moment(response.data.data_nascimento, \"DDMMYYYY\").format('DD/MM/YYYY')\n          })\n        })\n        this.carregandoCondutor = false\n      }\n    },\n    consultarCep(cep) {\n      if(cep && cep.length == 8) {\n        this.carregando = true\n        this.disabledEndereco = true\n        ViaCepService.buscarEndereco(cep).then(response => {\n          Object.assign(this.pessoa, {\n            endereco: response.data.logradouro,\n            complemento: response.data.complemento,\n            bairro: response.data.bairro,\n            municipio: response.data.localidade,\n            uf: response.data.uf\n          })\n          this.carregando = false\n        })\n      }\n      if(cep == '58000000') {\n        this.disabledEndereco = false\n      }\n    }\n  }\n}\n</script>\n\n<style>\n.required label::after {\n    content: \"*\";\n    color: red;\n}\n</style>"],"mappings":"AA2OA,OAAAA,MAAA;AACA,OAAAC,QAAA;AACA,YAAAC,YAAA;AACA,YAAAC,aAAA;AACA,OAAAC,YAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IAAAL,QAAA;IAAAG;EAAA;EACAG,IAAA,EAAAA,CAAA;IACAC,UAAA;IACAC,kBAAA;IACAC,WAAA,GACA;MACA;MACA;IACA,EACA;IACAC,MAAA;MACAC,IAAA;MACAC,IAAA;MACAC,GAAA;MACAC,aAAA;MACAC,YAAA;MACAC,QAAA;MACAC,WAAA;MACAC,MAAA;MACAC,SAAA;MACAC,EAAA;IACA;IACAC,MAAA;IACAC,SAAA;IACAC,gBAAA;EACA;EACAC,OAAA;IACAC,kBAAAC,GAAA;MACA,IAAAA,GAAA,IAAAA,GAAA,CAAAC,MAAA,eAAAjB,MAAA,CAAAC,IAAA;QACA,KAAAH,kBAAA;QACAP,YAAA,CAAA2B,cAAA,CAAAF,GAAA,EAAAG,IAAA,CAAAC,QAAA;UACAC,MAAA,CAAAC,MAAA,MAAAtB,MAAA;YACAE,IAAA,EAAAkB,QAAA,CAAAxB,IAAA,CAAA2B,aAAA;YACApB,GAAA,EAAAiB,QAAA,CAAAxB,IAAA,CAAA4B,YAAA;YACApB,aAAA,EAAAgB,QAAA,CAAAxB,IAAA,CAAA6B,aAAA;YACApB,YAAA,EAAAhB,MAAA,CAAA+B,QAAA,CAAAxB,IAAA,CAAA8B,aAAA,cAAAC,MAAA;YACAC,eAAA,EAAAvC,MAAA,CAAA+B,QAAA,CAAAxB,IAAA,CAAAgC,eAAA,cAAAD,MAAA;UACA;QACA;QACA,KAAA7B,kBAAA;MACA;IACA;IACA+B,aAAAC,GAAA;MACA,IAAAA,GAAA,IAAAA,GAAA,CAAAb,MAAA;QACA,KAAApB,UAAA;QACA,KAAAgB,gBAAA;QACArB,aAAA,CAAAuC,cAAA,CAAAD,GAAA,EAAAX,IAAA,CAAAC,QAAA;UACAC,MAAA,CAAAC,MAAA,MAAAtB,MAAA;YACAM,QAAA,EAAAc,QAAA,CAAAxB,IAAA,CAAAoC,UAAA;YACAzB,WAAA,EAAAa,QAAA,CAAAxB,IAAA,CAAAW,WAAA;YACAC,MAAA,EAAAY,QAAA,CAAAxB,IAAA,CAAAY,MAAA;YACAC,SAAA,EAAAW,QAAA,CAAAxB,IAAA,CAAAqC,UAAA;YACAvB,EAAA,EAAAU,QAAA,CAAAxB,IAAA,CAAAc;UACA;UACA,KAAAb,UAAA;QACA;MACA;MACA,IAAAiC,GAAA;QACA,KAAAjB,gBAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}