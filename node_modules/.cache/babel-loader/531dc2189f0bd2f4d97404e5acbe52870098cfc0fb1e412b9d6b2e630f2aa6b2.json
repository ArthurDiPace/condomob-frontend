{"ast":null,"code":"import SPagebar from '@/layout/SPagebar.vue';\nimport * as SemobService from '@/services/semob.service';\nimport PromptDialog from '@/components/PromptDialog.vue';\nexport default {\n  name: 'VeiculoCreate',\n  components: {\n    SPagebar,\n    PromptDialog\n  },\n  data: () => ({\n    breadcrumbs: [{\n      'text': 'Permissões',\n      'to': '/permissao',\n      'exact': true\n    }, {\n      'text': 'Detalhes',\n      'disabled': true\n    }, {\n      'text': 'Editar veículo',\n      'disabled': true\n    }],\n    veiculo: {\n      placa: '',\n      uf: '',\n      proprietario: '',\n      municipio: '',\n      chassi: '',\n      remarcacao_chassi: '',\n      desc_tipo: '',\n      desc_especie: '',\n      desc_marca_modelo: '',\n      desc_cor: '',\n      ano_fabricacao: '',\n      ano_modelo: '',\n      desc_carroceria: '',\n      desc_combustivel: '',\n      desc_categoria: '',\n      status: '',\n      licenciamento: '',\n      restricoes: '',\n      capacidade: ''\n    },\n    errors: {}\n  }),\n  created() {\n    this.getVeiculo(this.$route.params.id);\n  },\n  methods: {\n    async getVeiculo(id) {\n      const response = await this.$api.get({\n        resource: this.$endpoints.VEICULO,\n        id: id\n      });\n      this.veiculo = response.data;\n    },\n    async converterCadastro() {\n      const res = await this.$refs.prompt.open('Requerimento', 'Informe o número do requerimento', 'Número do requerimento');\n      if (res) {\n        this.veiculo.numero_requerimento = res;\n        this.veiculo.pre_cadastro = false;\n        const response = this.$api.update({\n          resource: this.$endpoints.VEICULO,\n          id: this.veiculo.id,\n          data: this.veiculo\n        });\n        response.then(() => {\n          this.$toast.open({\n            message: 'Registro salvo com sucesso',\n            type: 'success'\n          });\n          this.$router.back();\n        }).catch(error => {\n          this.errors = this.handleError(error);\n        });\n      }\n    },\n    async salvar() {\n      const res = await this.$refs.prompt.open('Requerimento', 'Informe o número do requerimento', 'Número do requerimento');\n      if (res) {\n        this.veiculo.numero_requerimento = res;\n        const response = this.$api.update({\n          resource: this.$endpoints.VEICULO,\n          id: this.veiculo.id,\n          data: this.veiculo\n        });\n        response.then(() => {\n          this.$toast.open({\n            message: 'Registro salvo com sucesso',\n            type: 'success'\n          });\n          this.$router.back();\n        }).catch(error => {\n          this.errors = this.handleError(error);\n        });\n      }\n    },\n    consultarVeiculoPorPlaca(placa) {\n      if (placa && placa.length == 7) {\n        this.carregando = true;\n        SemobService.buscarVeiculo({\n          placa: placa\n        }).then(response => {\n          Object.assign(this.veiculo, response.data);\n          if (Array.isArray(response.data.restricoes)) {\n            this.veiculo.restricoes = response.data.restricoes.join(', ');\n          }\n        }).catch(err => {\n          this.$toast.open({\n            message: err.response.data.detail,\n            type: 'error'\n          });\n        }).finally(() => {\n          this.carregando = false;\n        });\n      }\n    },\n    consultarVeiculoPorChassi(chassi) {\n      if (chassi && chassi.length == 17) {\n        this.carregando = true;\n        SemobService.buscarVeiculo({\n          chassi: chassi\n        }).then(response => {\n          Object.assign(this.veiculo, response.data);\n          if (Array.isArray(response.data.restricoes)) {\n            this.veiculo.restricoes = response.data.restricoes.join(', ');\n          }\n        }).catch(err => {\n          this.$toast.open({\n            message: err.response.data.detail,\n            type: 'error'\n          });\n        }).finally(() => {\n          this.carregando = false;\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["SPagebar","SemobService","PromptDialog","name","components","data","breadcrumbs","veiculo","placa","uf","proprietario","municipio","chassi","remarcacao_chassi","desc_tipo","desc_especie","desc_marca_modelo","desc_cor","ano_fabricacao","ano_modelo","desc_carroceria","desc_combustivel","desc_categoria","status","licenciamento","restricoes","capacidade","errors","created","getVeiculo","$route","params","id","methods","response","$api","get","resource","$endpoints","VEICULO","converterCadastro","res","$refs","prompt","open","numero_requerimento","pre_cadastro","update","then","$toast","message","type","$router","back","catch","error","handleError","salvar","consultarVeiculoPorPlaca","length","carregando","buscarVeiculo","Object","assign","Array","isArray","join","err","detail","finally","consultarVeiculoPorChassi"],"sources":["src/views/veiculo/VeiculoPrecadastroEdit.vue"],"sourcesContent":["<template>\n  <v-container fluid>\n    <s-pagebar\n      page-title=\"Pré-cadastro - Editar veículo\"\n      :breadcrumbs=\"breadcrumbs\"\n    >\n      <v-menu offset-y>\n        <template #activator=\"{ on, attrs }\">\n          <v-btn\n            color=\"blue-grey darken-4\"\n            dark\n            fab\n            small\n            v-bind=\"attrs\"\n            v-on=\"on\"\n          >\n            <v-icon>more_vert</v-icon>\n          </v-btn>\n        </template>\n        <v-list>\n          <v-list-item\n            link\n            @click=\"converterCadastro\"\n          >\n            <v-list-item-title>Efetivar Cadastro</v-list-item-title>\n          </v-list-item>\n        </v-list>\n      </v-menu>\n    </s-pagebar>\n    <v-card flat>\n      <v-card-text>\n        <v-row dense>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n            md=\"1\"\n          >\n            <v-text-field\n              v-model=\"veiculo.placa\"\n              label=\"Placa\"\n              :error-messages=\"errors.placa\"\n              @input=\"consultarVeiculoPorPlaca\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n            md=\"2\"\n          >\n            <v-text-field\n              v-model=\"veiculo.chassi\"\n              label=\"Chassi\"\n              :error-messages=\"errors.chassi\"\n              @input=\"consultarVeiculoPorChassi\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n            md=\"1\"\n          >\n            <v-text-field\n              v-model=\"veiculo.uf\"\n              label=\"UF\"\n              readonly\n              :error-messages=\"errors.uf\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n            md=\"4\"\n          >\n            <v-text-field\n              v-model=\"veiculo.municipio\"\n              label=\"Município\"\n              readonly\n              :error-messages=\"errors.municipio\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n            md=\"6\"\n          >\n            <v-text-field\n              v-model=\"veiculo.proprietario\"\n              label=\"Proprietário\"\n              readonly\n              :error-messages=\"errors.proprietario\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n            md=\"1\"\n          >\n            <v-text-field\n              v-model=\"veiculo.remarcacao_chassi\"\n              label=\"Remarcação Chassi\"\n              readonly\n              :error-messages=\"errors.remarcacao_chassi\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n            md=\"3\"\n          >\n            <v-text-field\n              v-model=\"veiculo.desc_tipo\"\n              label=\"Tipo\"\n              readonly\n              :error-messages=\"errors.desc_tipo\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n            md=\"3\"\n          >\n            <v-text-field\n              v-model=\"veiculo.desc_especie\"\n              label=\"Espécie\"\n              readonly\n              :error-messages=\"errors.desc_especie\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n            md=\"3\"\n          >\n            <v-text-field\n              v-model=\"veiculo.desc_cor\"\n              label=\"Cor\"\n              readonly\n              :error-messages=\"errors.desc_cor\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n            md=\"9\"\n          >\n            <v-text-field\n              v-model=\"veiculo.desc_marca_modelo\"\n              label=\"Marca/Modelo\"\n              readonly\n              :error-messages=\"errors.desc_marca_modelo\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n            md=\"1\"\n          >\n            <v-text-field\n              v-model=\"veiculo.ano_fabricacao\"\n              label=\"Ano Fabricação\"\n              readonly\n              :error-messages=\"errors.ano_fabricacao\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n            md=\"1\"\n          >\n            <v-text-field\n              v-model=\"veiculo.ano_modelo\"\n              label=\"Ano Modelo\"\n              readonly\n              :error-messages=\"errors.ano_modelo\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n            md=\"1\"\n          >\n            <v-text-field\n              v-model=\"veiculo.licenciamento\"\n              label=\"Licenciamento\"\n              readonly\n              :error-messages=\"errors.licenciamento\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n            md=\"3\"\n          >\n            <v-text-field\n              v-model=\"veiculo.desc_carroceria\"\n              label=\"Carroceria\"\n              readonly\n              :error-messages=\"errors.desc_carroceria\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n            md=\"3\"\n          >\n            <v-text-field\n              v-model=\"veiculo.desc_combustivel\"\n              label=\"Combustível\"\n              readonly\n              :error-messages=\"errors.desc_combustivel\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n            md=\"3\"\n          >\n            <v-text-field\n              v-model=\"veiculo.desc_categoria\"\n              label=\"Categoria\"\n              readonly\n              :error-messages=\"errors.desc_categoria\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n            md=\"3\"\n          >\n            <v-text-field\n              v-model=\"veiculo.status\"\n              label=\"Status\"\n              readonly\n              :error-messages=\"errors.status\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-textarea\n              v-model=\"veiculo.restricoes\"\n              filled\n              label=\"Restrições\"\n              readonly\n              :error-messages=\"errors.restricoes\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n            md=\"4\"\n          >\n            <v-text-field\n              v-model=\"veiculo.capacidade\"\n              label=\"Capacidade\"\n              readonly\n              :error-messages=\"errors.capacidade\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"categoria=='taxi'\"\n            cols=\"12\"\n            sm=\"12\"\n            md=\"4\"\n          >\n            <v-text-field\n              v-model=\"veiculo.taximetro\"\n              label=\"Táximetro\"\n              :error-messages=\"errors.taximetro\"\n            />\n          </v-col>\n          <v-col\n            v-if=\"categoria!='taxi' && veiculo.desc_carroceria!='BUGGY'\"\n            cols=\"12\"\n            sm=\"12\"\n            md=\"4\"\n          >\n            <v-text-field\n              v-model=\"veiculo.tacografo\"\n              label=\"Tácografo\"\n              :error-messages=\"errors.tacografo\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-textarea\n              v-model=\"veiculo.observacao\"\n              label=\"Observações\"\n              filled\n              :error-messages=\"errors.observacao\"\n            />\n          </v-col>\n        </v-row>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer />\n        <v-btn\n          outlined\n          color=\"blue-grey darken-4\"\n          @click=\"$router.back()\"\n        >\n          Voltar\n        </v-btn>\n        <v-btn\n          color=\"blue-grey darken-4\"\n          dark\n          @click=\"salvar\"\n        >\n          Salvar\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n    <prompt-dialog ref=\"prompt\" />\n  </v-container>\n</template>\n\n<script>\nimport SPagebar from '@/layout/SPagebar.vue'\nimport * as SemobService from '@/services/semob.service'\nimport PromptDialog from '@/components/PromptDialog.vue'\n\nexport default {\n  name: 'VeiculoCreate',\n  components: { SPagebar, PromptDialog },\n  data: () => ({\n    breadcrumbs: [\n      {\n        'text': 'Permissões',\n        'to': '/permissao',\n        'exact': true\n      },\n      {\n        'text': 'Detalhes',\n        'disabled': true\n      },\n      {\n        'text': 'Editar veículo',\n        'disabled': true\n      }\n    ],\n    veiculo: {\n      placa: '',\n      uf: '',\n      proprietario: '',\n      municipio: '',\n      chassi: '',\n      remarcacao_chassi: '',\n      desc_tipo: '',\n      desc_especie: '',\n      desc_marca_modelo: '',\n      desc_cor: '',\n      ano_fabricacao: '',\n      ano_modelo: '',\n      desc_carroceria: '',\n      desc_combustivel: '',\n      desc_categoria: '',\n      status: '',\n      licenciamento: '',\n      restricoes: '',\n      capacidade:'',\n    },\n    errors: {}\n  }),\n  created() {\n    this.getVeiculo(this.$route.params.id)\n  },\n  methods: {\n    async getVeiculo(id) {\n      const response = await this.$api.get({\n        resource: this.$endpoints.VEICULO,\n        id: id\n      })\n      this.veiculo = response.data\n    },\n    async converterCadastro() {\n      const res = await this.$refs.prompt.open(\n        'Requerimento',\n        'Informe o número do requerimento',\n        'Número do requerimento'\n      )\n      if (res) {\n        this.veiculo.numero_requerimento = res\n        this.veiculo.pre_cadastro = false\n        const response = this.$api.update({\n          resource: this.$endpoints.VEICULO,\n          id: this.veiculo.id,\n          data: this.veiculo\n        })\n      response\n        .then(()=>{\n          this.$toast.open({\n              message: 'Registro salvo com sucesso',\n              type: 'success',\n          })\n          this.$router.back()\n        })\n        .catch(error=>{\n          this.errors = this.handleError(error)\n        })\n      }\n    },\n    async salvar() {\n      \n      const res = await this.$refs.prompt.open(\n        'Requerimento',\n        'Informe o número do requerimento',\n        'Número do requerimento'\n      )\n      if (res) {\n        this.veiculo.numero_requerimento = res\n        const response = this.$api.update({\n          resource: this.$endpoints.VEICULO,\n          id: this.veiculo.id,\n          data: this.veiculo\n        })\n        response\n          .then(()=>{\n            this.$toast.open({\n                message: 'Registro salvo com sucesso',\n                type: 'success',\n            })\n            this.$router.back()\n          })\n          .catch(error=>{\n            this.errors = this.handleError(error)\n          })\n      }\n    },\n    consultarVeiculoPorPlaca(placa) {\n      if(placa && placa.length == 7) {\n        this.carregando = true\n        SemobService.buscarVeiculo({placa:placa}).then(response => {\n          Object.assign(this.veiculo, response.data)\n          if (Array.isArray(response.data.restricoes)) {\n            this.veiculo.restricoes = response.data.restricoes.join(', ');\n          }\n        })\n        .catch((err)=>{\n          this.$toast.open({\n            message: err.response.data.detail,\n            type: 'error',\n          })\n        })\n        .finally(()=>{\n          this.carregando = false;\n        })\n      }\n    },\n    consultarVeiculoPorChassi(chassi) {\n      if(chassi && chassi.length == 17) {\n        this.carregando = true\n        SemobService.buscarVeiculo({chassi:chassi}).then(response => {\n          Object.assign(this.veiculo, response.data)\n          if (Array.isArray(response.data.restricoes)) {\n            this.veiculo.restricoes = response.data.restricoes.join(', ');\n          }\n        })\n        .catch((err)=>{\n          this.$toast.open({\n            message: err.response.data.detail,\n            type: 'error',\n          })\n        })\n        .finally(()=>{\n          this.carregando = false;\n        })\n      }\n    }\n  }\n}\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}