{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport * as boletoService from '@/services/boleto.service';\nexport default {\n  name: 'BoletoList',\n  props: {\n    permissao: Object\n  },\n  data: () => ({\n    headers: [{\n      text: 'Data',\n      value: 'data'\n    }, {\n      text: 'Nosso número',\n      value: 'nosso_numero'\n    }, {\n      text: 'Pago',\n      value: 'pago'\n    }, {\n      text: 'Ações',\n      value: 'action'\n    }],\n    items: [],\n    totalItems: 0,\n    options: {}\n  }),\n  created() {\n    this.getBoletos();\n  },\n  methods: {\n    async getBoletos() {\n      const {\n        sortBy,\n        sortDesc,\n        page,\n        itemsPerPage\n      } = this.options;\n      const query = {\n        permissao: this.permissao.id,\n        page: page,\n        page_size: itemsPerPage,\n        ordering: `${sortDesc && sortDesc[0] ? \"-\" : \"\"}${sortBy}`\n      };\n      const response = await this.$api.list({\n        resource: this.$endpoints.PERMISSAO_BOLETO,\n        query: query\n      });\n      this.items = response.data.results;\n      this.totalItems = response.data.count;\n    },\n    reimprimirBoleto(nossoNumero) {\n      let request = boletoService.emitirSegundaVia(nossoNumero);\n      request.then(response => {\n        const downloadUrl = window.URL.createObjectURL(response.data);\n        window.open(downloadUrl, '__blank');\n      }).catch(error => {\n        this.handleBlobError(error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["boletoService","name","props","permissao","Object","data","headers","text","value","items","totalItems","options","created","getBoletos","methods","sortBy","sortDesc","page","itemsPerPage","query","id","page_size","ordering","response","$api","list","resource","$endpoints","PERMISSAO_BOLETO","results","count","reimprimirBoleto","nossoNumero","request","emitirSegundaVia","then","downloadUrl","window","URL","createObjectURL","open","catch","error","handleBlobError"],"sources":["src/views/boleto/BoletoList.vue"],"sourcesContent":["<template>\n  <v-data-table\n    :headers=\"headers\"\n    :items=\"items\"\n    :options.sync=\"options\"\n    :server-items-length=\"totalItems\"\n    :items-per-page=\"10\"\n    :footer-props=\"{\n      'items-per-page-options': [10, 20, 30]\n    }\"\n  >\n    <template #[`item.data`]=\"{ item }\">\n      {{ formatDateTime(item.data) }}\n    </template>\n    <template #[`item.pago`]=\"{ item }\">\n      <v-icon\n        v-if=\"item.pago\"\n        color=\"green\"\n      >\n        check_circle\n      </v-icon>\n      <v-icon\n        v-else\n        color=\"red\"\n      >\n        cancel\n      </v-icon>\n    </template>\n    <template #[`item.action`]=\"{ item }\">\n      <v-toolbar-items>\n        <v-tooltip bottom>\n          <template #activator=\"{ on, attrs }\">\n            <v-btn\n              v-bind=\"attrs\"\n              icon\n              v-on=\"on\"\n              @click=\"reimprimirBoleto(item.nosso_numero)\"         \n            >\n              <v-icon class=\"material-icons-outlined\">\n                print\n              </v-icon>\n            </v-btn>\n          </template>\n          <span>Imprimir</span>\n        </v-tooltip>\n      </v-toolbar-items>\n    </template>\n  </v-data-table>\n</template>\n\n<script>\nimport * as boletoService from '@/services/boleto.service'\n\nexport default {\n  name: 'BoletoList',\n  props: {\n    permissao: Object\n  },\n  data: () => ({\n    headers: [\n      {text: 'Data', value: 'data'},\n      {text: 'Nosso número', value: 'nosso_numero'},\n      {text: 'Pago', value: 'pago'},\n      {text: 'Ações', value: 'action'},\n    ],\n    items: [],\n    totalItems: 0,\n    options: {}\n  }),\n  created() {\n    this.getBoletos()\n  },\n  methods: {\n    async getBoletos() {\n      const { sortBy, sortDesc, page, itemsPerPage } = this.options\n      const query = {\n          permissao: this.permissao.id,\n          page: page,\n          page_size: itemsPerPage,\n          ordering: `${sortDesc && sortDesc[0] ? \"-\" : \"\"}${sortBy}`\n      }\n      const response = await this.$api.list({\n          resource: this.$endpoints.PERMISSAO_BOLETO,\n          query: query\n      })\n      this.items = response.data.results\n      this.totalItems = response.data.count\n    },\n    reimprimirBoleto(nossoNumero) {\n      let request = boletoService.emitirSegundaVia(nossoNumero)\n      request\n        .then(response => {\n          const downloadUrl = window.URL.createObjectURL(response.data)\n          window.open(downloadUrl, '__blank')\n        })\n        .catch((error) => {\n          this.handleBlobError(error)\n        });\n    }\n  }\n}\n</script>"],"mappings":";;;AAmDA,YAAAA,aAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACAC,SAAA,EAAAC;EACA;EACAC,IAAA,EAAAA,CAAA;IACAC,OAAA,GACA;MAAAC,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,EACA;IACAC,KAAA;IACAC,UAAA;IACAC,OAAA;EACA;EACAC,QAAA;IACA,KAAAC,UAAA;EACA;EACAC,OAAA;IACA,MAAAD,WAAA;MACA;QAAAE,MAAA;QAAAC,QAAA;QAAAC,IAAA;QAAAC;MAAA,SAAAP,OAAA;MACA,MAAAQ,KAAA;QACAhB,SAAA,OAAAA,SAAA,CAAAiB,EAAA;QACAH,IAAA,EAAAA,IAAA;QACAI,SAAA,EAAAH,YAAA;QACAI,QAAA,KAAAN,QAAA,IAAAA,QAAA,iBAAAD,MAAA;MACA;MACA,MAAAQ,QAAA,cAAAC,IAAA,CAAAC,IAAA;QACAC,QAAA,OAAAC,UAAA,CAAAC,gBAAA;QACAT,KAAA,EAAAA;MACA;MACA,KAAAV,KAAA,GAAAc,QAAA,CAAAlB,IAAA,CAAAwB,OAAA;MACA,KAAAnB,UAAA,GAAAa,QAAA,CAAAlB,IAAA,CAAAyB,KAAA;IACA;IACAC,iBAAAC,WAAA;MACA,IAAAC,OAAA,GAAAjC,aAAA,CAAAkC,gBAAA,CAAAF,WAAA;MACAC,OAAA,CACAE,IAAA,CAAAZ,QAAA;QACA,MAAAa,WAAA,GAAAC,MAAA,CAAAC,GAAA,CAAAC,eAAA,CAAAhB,QAAA,CAAAlB,IAAA;QACAgC,MAAA,CAAAG,IAAA,CAAAJ,WAAA;MACA,GACAK,KAAA,CAAAC,KAAA;QACA,KAAAC,eAAA,CAAAD,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}