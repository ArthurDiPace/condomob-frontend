{"ast":null,"code":"import SPagebar from '@/layout/SPagebar.vue';\nexport default {\n  name: 'RequerimentoCreate',\n  components: {\n    SPagebar\n  },\n  data: () => ({\n    breadcrumbs: [{\n      'text': 'Requerimentos',\n      'to': '/requerimentos',\n      'exact': true\n    }, {\n      'text': 'Cadastrar',\n      'disabled': true\n    }],\n    requerimento: {},\n    errors: {},\n    permissao: {},\n    descricoes: [],\n    status: [{\n      text: 'Em andamento',\n      value: 'em_andamento'\n    }, {\n      text: 'Cancelado',\n      value: 'cancelado'\n    }, {\n      text: 'Finalizado',\n      value: 'finalizado'\n    }],\n    categorias: [{\n      text: 'Táxi',\n      value: 'taxi'\n    }, {\n      text: 'Escolar',\n      value: 'escolar'\n    }, {\n      text: 'Turismo',\n      value: 'turismo'\n    }, {\n      text: 'Fretamento',\n      value: 'fretamento'\n    }]\n  }),\n  created() {\n    this.getPermissao(this.$route.query.permissao);\n  },\n  methods: {\n    async getPermissao(id) {\n      const response = await this.$api.get({\n        resource: this.$endpoints.PERMISSAO,\n        id: id\n      });\n      this.permissao = response.data;\n      this.getDescricoes();\n    },\n    async getDescricoes() {\n      const response = await this.$api.list({\n        resource: this.$endpoints.PROCESSO_DESCRICAO,\n        query: {\n          page_size: 10000,\n          categoria: this.permissao.categoria\n        }\n      });\n      this.descricoes = response.data.results;\n    },\n    salvar() {\n      this.requerimento.placa = this.requerimento.placa.toUpperCase();\n      let descricaoIDs = this.requerimento.descricao.join(',');\n      let formData = new FormData();\n      formData.append('permissao', this.permissao.id);\n      formData.append('numero', this.requerimento.numero);\n      formData.append('placa', this.requerimento.placa);\n      formData.append('categoria', this.permissao.categoria);\n      formData.append('descricao', descricaoIDs);\n      formData.append('documento', this.requerimento.documento);\n      const response = this.$api.create({\n        resource: this.$endpoints.PROCESSO,\n        data: formData\n      });\n      response.then(() => {\n        this.$toast.open({\n          message: 'Registro salvo com sucesso',\n          type: 'success'\n        });\n        this.$router.back();\n      }).catch(error => this.errors = this.handleError(error));\n    },\n    handleFile(val) {\n      this.requerimento.documento = val;\n    }\n  }\n};","map":{"version":3,"names":["SPagebar","name","components","data","breadcrumbs","requerimento","errors","permissao","descricoes","status","text","value","categorias","created","getPermissao","$route","query","methods","id","response","$api","get","resource","$endpoints","PERMISSAO","getDescricoes","list","PROCESSO_DESCRICAO","page_size","categoria","results","salvar","placa","toUpperCase","descricaoIDs","descricao","join","formData","FormData","append","numero","documento","create","PROCESSO","then","$toast","open","message","type","$router","back","catch","error","handleError","handleFile","val"],"sources":["src/views/requerimento/RequerimentoCreate.vue"],"sourcesContent":["<template>\n  <v-container fluid>\n    <s-pagebar\n      page-title=\"Cadastrar Requerimento\"\n      :breadcrumbs=\"breadcrumbs\"\n    />\n    <v-card flat>\n      <v-card-text>\n        <v-row dense>\n          <v-col\n            cols=\"12\"\n            md=\"5\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"requerimento.numero\"\n              label=\"Número\"\n              class=\"required\"\n              :error-messages=\"errors.numero\"\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            md=\"5\"\n            sm=\"12\"\n          >\n            <v-text-field\n              v-model=\"requerimento.placa\"\n              label=\"Placa\"\n              class=\"required\"\n              :error-messages=\"errors.numero\"\n            />\n          </v-col>\n          <!-- <v-col\n            cols=\"12\"\n            md=\"4\"\n            sm=\"12\"\n          >\n            <v-autocomplete\n              v-model=\"permissao.categoria\"\n              :items=\"categorias\"\n              item-text=\"text\"\n              item-value=\"value\"\n              label=\"Categorias\"\n              :error-messages=\"errors.categoria\"\n              readonly\n              @change=\"getDescricoes\"\n            />\n          </v-col> -->\n          <v-col\n            cols=\"12\"\n            md=\"5\"\n            sm=\"12\"\n          >\n            <v-autocomplete\n              v-model=\"requerimento.descricao\"\n              :items=\"descricoes\"\n              item-text=\"descricao\"\n              item-value=\"id\"\n              label=\"Descrição\"\n              :error-messages=\"errors.descricao\"\n              multiple\n            />\n          </v-col>\n          <v-col\n            cols=\"12\"\n            sm=\"12\"\n          >\n            <v-file-input\n              label=\"Documento\"\n              :error-messages=\"errors.documento\"\n              @change=\"handleFile\"\n            />\n          </v-col>\n        </v-row>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer />\n        <v-btn\n          outlined\n          color=\"blue-grey darken-4\"\n          @click=\"$router.back()\"\n        >\n          Voltar\n        </v-btn>\n        <v-btn\n          color=\"blue-grey darken-4\"\n          dark\n          @click=\"salvar\"\n        >\n          Salvar\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-container>\n</template>\n\n<script>\nimport SPagebar from '@/layout/SPagebar.vue'\nexport default {\n  name: 'RequerimentoCreate',\n  components: { SPagebar },\n  data: () => ({\n    breadcrumbs: [\n      {\n        'text': 'Requerimentos',\n        'to': '/requerimentos',\n        'exact': true\n      },\n      {\n        'text': 'Cadastrar',\n        'disabled': true\n      }\n    ],\n    requerimento: {},\n    errors: {},\n    permissao: {},\n    descricoes: [],\n    status: [\n      {text: 'Em andamento', value: 'em_andamento'},\n      {text: 'Cancelado', value: 'cancelado'},\n      {text: 'Finalizado', value: 'finalizado'},\n    ],\n    categorias: [\n      {text: 'Táxi', value: 'taxi'},\n      {text: 'Escolar', value: 'escolar'},\n      {text: 'Turismo', value: 'turismo'},\n      {text: 'Fretamento', value: 'fretamento'},\n    ],\n  }),\n  created(){\n    this.getPermissao(this.$route.query.permissao)\n  },\n  methods: {\n    async getPermissao(id) {\n      const response = await this.$api.get({\n        resource: this.$endpoints.PERMISSAO,\n        id: id\n      })\n      this.permissao = response.data\n      this.getDescricoes()\n    },\n    async getDescricoes() {\n      const response = await this.$api.list({\n        resource: this.$endpoints.PROCESSO_DESCRICAO,\n        query: {\n          page_size: 10000,\n          categoria: this.permissao.categoria\n        }\n      })\n      this.descricoes = response.data.results\n    },\n    salvar() {\n      this.requerimento.placa = this.requerimento.placa.toUpperCase();\n      let descricaoIDs = this.requerimento.descricao.join(',');\n      \n      let formData = new FormData()\n      formData.append('permissao', this.permissao.id)\n      formData.append('numero', this.requerimento.numero)\n      formData.append('placa', this.requerimento.placa)\n      formData.append('categoria', this.permissao.categoria)\n      formData.append('descricao', descricaoIDs);\n      formData.append('documento', this.requerimento.documento)\n      const response = this.$api.create({\n        resource: this.$endpoints.PROCESSO,\n        data: formData\n      })\n      response\n        .then(()=>{\n          this.$toast.open({\n              message: 'Registro salvo com sucesso',\n              type: 'success',\n          })\n          this.$router.back()\n        })\n        .catch(error=>this.errors = this.handleError(error))\n    },\n    handleFile(val) {\n      this.requerimento.documento = val\n    }\n  }\n}\n</script>"],"mappings":"AAkGA,OAAAA,QAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAF;EAAA;EACAG,IAAA,EAAAA,CAAA;IACAC,WAAA,GACA;MACA;MACA;MACA;IACA,GACA;MACA;MACA;IACA,EACA;IACAC,YAAA;IACAC,MAAA;IACAC,SAAA;IACAC,UAAA;IACAC,MAAA,GACA;MAAAC,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,EACA;IACAC,UAAA,GACA;MAAAF,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA;EAEA;EACAE,QAAA;IACA,KAAAC,YAAA,MAAAC,MAAA,CAAAC,KAAA,CAAAT,SAAA;EACA;EACAU,OAAA;IACA,MAAAH,aAAAI,EAAA;MACA,MAAAC,QAAA,cAAAC,IAAA,CAAAC,GAAA;QACAC,QAAA,OAAAC,UAAA,CAAAC,SAAA;QACAN,EAAA,EAAAA;MACA;MACA,KAAAX,SAAA,GAAAY,QAAA,CAAAhB,IAAA;MACA,KAAAsB,aAAA;IACA;IACA,MAAAA,cAAA;MACA,MAAAN,QAAA,cAAAC,IAAA,CAAAM,IAAA;QACAJ,QAAA,OAAAC,UAAA,CAAAI,kBAAA;QACAX,KAAA;UACAY,SAAA;UACAC,SAAA,OAAAtB,SAAA,CAAAsB;QACA;MACA;MACA,KAAArB,UAAA,GAAAW,QAAA,CAAAhB,IAAA,CAAA2B,OAAA;IACA;IACAC,OAAA;MACA,KAAA1B,YAAA,CAAA2B,KAAA,QAAA3B,YAAA,CAAA2B,KAAA,CAAAC,WAAA;MACA,IAAAC,YAAA,QAAA7B,YAAA,CAAA8B,SAAA,CAAAC,IAAA;MAEA,IAAAC,QAAA,OAAAC,QAAA;MACAD,QAAA,CAAAE,MAAA,mBAAAhC,SAAA,CAAAW,EAAA;MACAmB,QAAA,CAAAE,MAAA,gBAAAlC,YAAA,CAAAmC,MAAA;MACAH,QAAA,CAAAE,MAAA,eAAAlC,YAAA,CAAA2B,KAAA;MACAK,QAAA,CAAAE,MAAA,mBAAAhC,SAAA,CAAAsB,SAAA;MACAQ,QAAA,CAAAE,MAAA,cAAAL,YAAA;MACAG,QAAA,CAAAE,MAAA,mBAAAlC,YAAA,CAAAoC,SAAA;MACA,MAAAtB,QAAA,QAAAC,IAAA,CAAAsB,MAAA;QACApB,QAAA,OAAAC,UAAA,CAAAoB,QAAA;QACAxC,IAAA,EAAAkC;MACA;MACAlB,QAAA,CACAyB,IAAA;QACA,KAAAC,MAAA,CAAAC,IAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA,KAAAC,OAAA,CAAAC,IAAA;MACA,GACAC,KAAA,CAAAC,KAAA,SAAA9C,MAAA,QAAA+C,WAAA,CAAAD,KAAA;IACA;IACAE,WAAAC,GAAA;MACA,KAAAlD,YAAA,CAAAoC,SAAA,GAAAc,GAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}