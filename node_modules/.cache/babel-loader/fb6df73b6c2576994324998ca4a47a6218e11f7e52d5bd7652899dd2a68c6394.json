{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport ConfirmDialog from '@/components/ConfirmDialog.vue';\nimport SPagebar from '@/layout/SPagebar.vue';\nexport default {\n  name: 'TaxaList',\n  components: {\n    SPagebar,\n    ConfirmDialog\n  },\n  data: () => ({\n    breadcrumbs: [{\n      'text': 'Taxas',\n      'to': '/taxa',\n      'exact': true\n    }],\n    categorias: [{\n      text: 'Táxi',\n      value: 'taxi'\n    }, {\n      text: 'Escolar',\n      value: 'escolar'\n    }, {\n      text: 'Turismo',\n      value: 'turismo'\n    }, {\n      text: 'Fretamento',\n      value: 'fretamento'\n    }],\n    headers: [{\n      text: 'Descrição',\n      value: 'descricao'\n    }, {\n      text: 'Categoria',\n      value: 'categoria'\n    }, {\n      text: 'Valor Percentual',\n      value: 'valor_percentual'\n    }, {\n      text: 'Valor Real',\n      value: 'valor_real'\n    }, {\n      text: 'Ações',\n      value: 'action'\n    }],\n    filtro: {\n      categoria: null\n    },\n    totalItems: 0,\n    items: [],\n    options: {}\n  }),\n  watch: {\n    options: {\n      handler() {\n        this.getTaxas();\n      },\n      deep: true\n    }\n  },\n  methods: {\n    async getTaxas() {\n      const {\n        sortBy,\n        sortDesc,\n        page,\n        itemsPerPage\n      } = this.options;\n      const query = {\n        page: page,\n        page_size: itemsPerPage,\n        ordering: `${sortDesc && sortDesc[0] ? '-' : ''}${sortBy}`,\n        categoria: this.filtro.categoria\n      };\n      const response = await this.$api.list({\n        resource: this.$endpoints.TAXA,\n        query: query\n      });\n      this.items = response.data.results;\n      this.totalItems = response.data.count;\n    },\n    cadastrarTaxa() {\n      this.$router.push('/taxa/cadastrar');\n    },\n    editarTaxa(id) {\n      this.$router.push(`/taxa/${id}`);\n    },\n    async excluirTaxa(id) {\n      const res = await this.$refs.confirm.open('Confirmar exclusão', 'Tem certeza que deseja excluir este registro ?');\n      if (res) {\n        const response = this.$api.destroy({\n          resource: this.$endpoints.TAXA,\n          id: id\n        });\n        response.then(() => this.getTaxas());\n      }\n    },\n    limparFiltros() {\n      this.filtro = {\n        categoria: null\n      };\n      this.getTaxas();\n    }\n  }\n};","map":{"version":3,"names":["ConfirmDialog","SPagebar","name","components","data","breadcrumbs","categorias","text","value","headers","filtro","categoria","totalItems","items","options","watch","handler","getTaxas","deep","methods","sortBy","sortDesc","page","itemsPerPage","query","page_size","ordering","response","$api","list","resource","$endpoints","TAXA","results","count","cadastrarTaxa","$router","push","editarTaxa","id","excluirTaxa","res","$refs","confirm","open","destroy","then","limparFiltros"],"sources":["src/views/taxa/TaxaList.vue"],"sourcesContent":["<template>\n  <v-container fluid>\n    <s-pagebar\n      page-title=\"Taxas\"\n      :breadcrumbs=\"breadcrumbs\"\n    >\n      <v-btn\n        color=\"blue-grey darken-4\"\n        dark\n        fab\n        small\n        @click=\"cadastrarTaxa\"\n      >\n        <v-icon>add</v-icon>\n      </v-btn>\n    </s-pagebar>\n    <v-card flat>\n      <v-card-text>\n        <div class=\"d-flex align-center\">\n          <div style=\"max-width: 500px\">\n            <v-autocomplete\n              v-model=\"filtro.categoria\"\n              label=\"Categoria\"\n              :items=\"categorias\"\n              class=\"mr-3\"\n            />\n          </div>\n          <v-btn\n            color=\"blue-grey darken-4 mr-3\"\n            dark\n            @click=\"getTaxas\"\n          >\n            <v-icon>search</v-icon>\n            Pesquisar\n          </v-btn>\n          <v-btn\n            outlined\n            color=\"blue-grey darken-4\"\n            @click=\"limparFiltros\"\n          >\n            Limpar filtros\n          </v-btn>\n        </div>\n        <v-data-table\n          :headers=\"headers\"\n          :items=\"items\"\n          :options.sync=\"options\"\n          :server-items-length=\"totalItems\"\n          :items-per-page=\"10\"\n          :footer-props=\"{\n            'items-per-page-options': [10, 20, 30]\n          }\"\n        >\n          <template #[`item.categoria`]=\"{ item }\">\n            <span v-if=\"item.categoria=='taxi'\">Táxi</span>\n            <span v-if=\"item.categoria=='escolar'\">Escolar</span>\n            <span v-if=\"item.categoria=='turismo'\">Turismo</span>\n            <span v-if=\"item.categoria=='fretamento'\">Fretamento</span>\n          </template>\n          <template #[`item.valor_real`]=\"{ item }\">\n            R$ {{ item.valor_real }}\n          </template>\n          <template #[`item.action`]=\"{ item }\">\n            <v-toolbar-items>\n              <v-tooltip bottom>\n                <template #activator=\"{ on, attrs }\">\n                  <v-btn\n                    v-bind=\"attrs\"\n                    icon\n                    v-on=\"on\"\n                    @click=\"editarTaxa(item.id)\"         \n                  >\n                    <v-icon class=\"material-icons-outlined\">\n                      visibility\n                    </v-icon>\n                  </v-btn>\n                </template>\n                <span>Editar</span>\n              </v-tooltip>\n              <v-tooltip bottom>\n                <template #activator=\"{ on, attrs }\">\n                  <v-btn\n                    v-bind=\"attrs\"\n                    icon\n                    v-on=\"on\"\n                    @click=\"excluirTaxa(item.id)\"         \n                  >\n                    <v-icon class=\"material-icons-outlined\">\n                      delete\n                    </v-icon>\n                  </v-btn>\n                </template>\n                <span>Deletar</span>\n              </v-tooltip>\n            </v-toolbar-items>\n          </template>\n        </v-data-table>\n      </v-card-text>\n    </v-card>\n    <ConfirmDialog ref=\"confirm\" />\n  </v-container>\n</template>\n\n<script>\nimport ConfirmDialog from '@/components/ConfirmDialog.vue'\nimport SPagebar from '@/layout/SPagebar.vue'\nexport default {\n  name: 'TaxaList',\n  components: { SPagebar, ConfirmDialog },\n  data: () => ({\n    breadcrumbs: [\n      {\n        'text': 'Taxas',\n        'to': '/taxa',\n        'exact': true\n      }\n    ],\n    categorias: [\n      {text: 'Táxi', value: 'taxi'},\n      {text: 'Escolar', value: 'escolar'},\n      {text: 'Turismo', value: 'turismo'},\n      {text: 'Fretamento', value: 'fretamento'},\n    ],\n    headers: [\n      {text: 'Descrição', value: 'descricao'},\n      {text: 'Categoria', value: 'categoria'},\n      {text: 'Valor Percentual', value: 'valor_percentual'},\n      {text: 'Valor Real', value: 'valor_real'},\n      {text: 'Ações', value: 'action'},\n    ],\n    filtro: {\n      categoria: null,\n    },\n    totalItems: 0,\n    items: [],\n    options: {}\n  }),\n  watch: {\n    options: {\n      handler() {\n        this.getTaxas()\n      },\n      deep: true\n    },\n  },\n  methods: {\n    async getTaxas() {\n      const { sortBy, sortDesc, page, itemsPerPage } = this.options\n      const query = {\n        page: page,\n        page_size: itemsPerPage,\n        ordering: `${sortDesc && sortDesc[0] ? '-':''}${sortBy}`,\n        categoria: this.filtro.categoria,\n      }\n      const response = await this.$api.list({\n        resource: this.$endpoints.TAXA,\n        query: query\n      })\n      this.items = response.data.results\n      this.totalItems = response.data.count\n    },\n    cadastrarTaxa() {\n      this.$router.push('/taxa/cadastrar')\n    },\n    editarTaxa(id) {\n      this.$router.push(`/taxa/${id}`)\n    },\n    async excluirTaxa(id) {\n        const res = await this.$refs.confirm.open(\n          'Confirmar exclusão',\n          'Tem certeza que deseja excluir este registro ?'\n        )\n        if (res) {\n          const response = this.$api.destroy({\n            resource: this.$endpoints.TAXA,\n            id: id\n          })\n          response.then(()=>this.getTaxas())\n        }\n    },\n    limparFiltros() {\n      this.filtro = {\n        categoria: null\n      }\n      this.getTaxas()\n    }\n  }\n}\n</script>"],"mappings":";AAwGA,OAAAA,aAAA;AACA,OAAAC,QAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAF,QAAA;IAAAD;EAAA;EACAI,IAAA,EAAAA,CAAA;IACAC,WAAA,GACA;MACA;MACA;MACA;IACA,EACA;IACAC,UAAA,GACA;MAAAC,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,EACA;IACAC,OAAA,GACA;MAAAF,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,EACA;IACAE,MAAA;MACAC,SAAA;IACA;IACAC,UAAA;IACAC,KAAA;IACAC,OAAA;EACA;EACAC,KAAA;IACAD,OAAA;MACAE,QAAA;QACA,KAAAC,QAAA;MACA;MACAC,IAAA;IACA;EACA;EACAC,OAAA;IACA,MAAAF,SAAA;MACA;QAAAG,MAAA;QAAAC,QAAA;QAAAC,IAAA;QAAAC;MAAA,SAAAT,OAAA;MACA,MAAAU,KAAA;QACAF,IAAA,EAAAA,IAAA;QACAG,SAAA,EAAAF,YAAA;QACAG,QAAA,KAAAL,QAAA,IAAAA,QAAA,iBAAAD,MAAA;QACAT,SAAA,OAAAD,MAAA,CAAAC;MACA;MACA,MAAAgB,QAAA,cAAAC,IAAA,CAAAC,IAAA;QACAC,QAAA,OAAAC,UAAA,CAAAC,IAAA;QACAR,KAAA,EAAAA;MACA;MACA,KAAAX,KAAA,GAAAc,QAAA,CAAAvB,IAAA,CAAA6B,OAAA;MACA,KAAArB,UAAA,GAAAe,QAAA,CAAAvB,IAAA,CAAA8B,KAAA;IACA;IACAC,cAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;IACAC,WAAAC,EAAA;MACA,KAAAH,OAAA,CAAAC,IAAA,UAAAE,EAAA;IACA;IACA,MAAAC,YAAAD,EAAA;MACA,MAAAE,GAAA,cAAAC,KAAA,CAAAC,OAAA,CAAAC,IAAA,CACA,sBACA,gDACA;MACA,IAAAH,GAAA;QACA,MAAAd,QAAA,QAAAC,IAAA,CAAAiB,OAAA;UACAf,QAAA,OAAAC,UAAA,CAAAC,IAAA;UACAO,EAAA,EAAAA;QACA;QACAZ,QAAA,CAAAmB,IAAA,YAAA7B,QAAA;MACA;IACA;IACA8B,cAAA;MACA,KAAArC,MAAA;QACAC,SAAA;MACA;MACA,KAAAM,QAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}